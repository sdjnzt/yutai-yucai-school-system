import{r as y,j as e,c as M,S as n,B as l,D as g,R as L,d as b,T as V}from"./index-BKa6_s3-.js";import{d as T}from"./dayjs.min-CX7emzkM.js";import{F as c}from"./index-Dy51_mCo.js";import{C as d,R as G,a as j}from"./row-CYwan9Jp.js";import{T as N}from"./index-DxCy7vEc.js";import{S as u}from"./index-D94na2-Y.js";import{R as f}from"./FileTextOutlined-BurRnXhR.js";import{a as I,R}from"./PushpinOutlined-D3s1dcFl.js";import{I as J}from"./index-RlXwS1IG.js";import{R as Q}from"./SearchOutlined-9Bh7V-wV.js";import{S as h}from"./index-B7le64xc.js";import{D as _}from"./index-BvjQcPBs.js";import{R as q,a as K}from"./FilterOutlined-T8zZBlvK.js";import{F as U}from"./Table-mhucBYhg.js";import{M as W}from"./index-Bmfv7wRd.js";import{A as X}from"./index-BUEwUzq1.js";import{T as o}from"./index-Bl9mn3fa.js";import{R as Z}from"./ApartmentOutlined-D7vsuUw6.js";import{L as $}from"./index-DbJUETRK.js";import{R as F,a as ee}from"./EditOutlined-CBP3Yp8X.js";import{P as te}from"./index-CvwNsgzJ.js";import{s as se}from"./index-BQEGLwMa.js";import"./EditOutlined-BMVt-i1G.js";import"./EyeOutlined-cX0j5ogd.js";import"./CalendarOutlined-DKq2sctu.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./DeleteOutlined-DFutYCzo.js";const{Title:ie,Text:Oe,Paragraph:re}=N,{RangePicker:ne}=_,Be=()=>{const[D,p]=y.useState(!1),[t,O]=y.useState(null),[k]=c.useForm(),w=()=>{const s=["通知","公告","文件"],i=["关于2025学年第一学期期末考试安排的通知","关于举办校园艺术节的公告","关于加强实验室安全管理的通知","2025年暑假放假安排","关于组织教师教学能力提升培训的通知","关于开展学生体质健康测试的通知","关于评选优秀班主任的公告","关于更新教学设备的通知"],m=[];for(let r=1;r<=8;r++){const a=s[Math.floor(Math.random()*s.length)],C=i[r-1],E=Math.random()>.7,Y=Math.floor(Math.random()*500)+100,A=T("2025-07-25").subtract(Math.floor(Math.random()*30),"day"),H=Math.random()>.2?"已发布":"草稿";m.push({key:r,id:`GG${String(r).padStart(4,"0")}`,type:a,title:C,content:`这是一条教务处发布的${a}，主要内容是关于${C.slice(2,-2)}的相关事项...`,publisher:"张志远",publisherTitle:"教务主任",department:"教务处",publishTime:A.format("YYYY-MM-DD HH:mm:ss"),isTop:E,readCount:Y,status:H,attachments:Math.random()>.5?["通知文件.pdf","附件材料.docx"]:[],recipients:["全体师生","全体教师","全体学生"][Math.floor(Math.random()*3)]})}return m.sort((r,a)=>r.status!==a.status?r.status==="草稿"?-1:1:r.isTop!==a.isTop?a.isTop?1:-1:T(a.publishTime).valueOf()-T(r.publishTime).valueOf())},x=y.useMemo(()=>{const s=w();return{total:s.length,published:s.filter(i=>i.status==="已发布").length,draft:s.filter(i=>i.status==="草稿").length,totalRead:s.reduce((i,m)=>i+m.readCount,0)}},[]),S=s=>{O(s),p(!0)},B=s=>{se.success("删除成功")},v=s=>{console.log("Edit record:",s)},P=s=>{console.log("Search values:",s)},z=[{title:"标题",dataIndex:"title",key:"title",width:400,fixed:"left",render:(s,i)=>e.jsxs(n,{children:[i.isTop&&e.jsx(R,{style:{color:"#f5222d"}}),e.jsx(o,{color:i.type==="通知"?"blue":i.type==="公告"?"green":"orange",children:i.type}),e.jsx(l,{type:"link",onClick:()=>S(i),style:{padding:0,height:"auto",whiteSpace:"normal",textAlign:"left"},children:s}),i.attachments.length>0&&e.jsx(V,{title:i.attachments.join(", "),children:e.jsx(f,{style:{color:"#1890ff"}})})]})},{title:"接收对象",dataIndex:"recipients",key:"recipients",width:120,render:s=>e.jsx(o,{icon:e.jsx(b,{}),color:"purple",children:s})},{title:"发布时间",dataIndex:"publishTime",key:"publishTime",width:180},{title:"状态",dataIndex:"status",key:"status",width:100,render:s=>e.jsx(o,{color:s==="已发布"?"success":"default",children:s})},{title:"阅读量",dataIndex:"readCount",key:"readCount",width:100,render:s=>e.jsxs(n,{children:[e.jsx(I,{}),e.jsx("span",{children:s})]})},{title:"操作",key:"action",width:200,fixed:"right",render:(s,i)=>e.jsxs(n,{children:[e.jsx(l,{type:"link",icon:e.jsx(f,{}),onClick:()=>S(i),children:"查看"}),e.jsx(l,{type:"link",icon:e.jsx(F,{}),onClick:()=>v(i),children:"编辑"}),e.jsx(te,{title:"确定要删除这条公告吗？",onConfirm:()=>B(),okText:"确定",cancelText:"取消",children:e.jsx(l,{type:"link",danger:!0,icon:e.jsx(ee,{}),children:"删除"})})]})}];return e.jsxs("div",{children:[e.jsxs(d,{children:[e.jsx(ie,{level:4,children:"我的公告"}),e.jsxs(G,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(j,{span:6,children:e.jsx(d,{children:e.jsx(u,{title:"公告总数",value:x.total,prefix:e.jsx(M,{style:{color:"#1890ff"}})})})}),e.jsx(j,{span:6,children:e.jsx(d,{children:e.jsx(u,{title:"已发布",value:x.published,valueStyle:{color:"#52c41a"},prefix:e.jsx(M,{})})})}),e.jsx(j,{span:6,children:e.jsx(d,{children:e.jsx(u,{title:"草稿箱",value:x.draft,valueStyle:{color:"#faad14"},prefix:e.jsx(f,{})})})}),e.jsx(j,{span:6,children:e.jsx(d,{children:e.jsx(u,{title:"总阅读量",value:x.totalRead,prefix:e.jsx(I,{style:{color:"#722ed1"}})})})})]}),e.jsx(d,{style:{marginBottom:16},children:e.jsxs(c,{form:k,layout:"inline",onFinish:P,children:[e.jsx(c.Item,{name:"keyword",children:e.jsx(J,{placeholder:"搜索标题/内容",prefix:e.jsx(Q,{}),style:{width:200}})}),e.jsx(c.Item,{name:"type",children:e.jsxs(h,{placeholder:"公告类型",style:{width:120},allowClear:!0,children:[e.jsx(h.Option,{value:"通知",children:"通知"}),e.jsx(h.Option,{value:"公告",children:"公告"}),e.jsx(h.Option,{value:"文件",children:"文件"})]})}),e.jsx(c.Item,{name:"status",children:e.jsxs(h,{placeholder:"发布状态",style:{width:120},allowClear:!0,children:[e.jsx(h.Option,{value:"已发布",children:"已发布"}),e.jsx(h.Option,{value:"草稿",children:"草稿"})]})}),e.jsx(c.Item,{name:"dateRange",children:e.jsx(ne,{style:{width:240}})}),e.jsx(c.Item,{children:e.jsxs(n,{children:[e.jsx(l,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),children:"筛选"}),e.jsx(l,{onClick:()=>k.resetFields(),children:"重置"})]})})]})}),e.jsx(U,{columns:z,dataSource:w(),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 条记录`},scroll:{x:1300}})]}),e.jsx(W,{title:e.jsxs(n,{children:[(t==null?void 0:t.isTop)&&e.jsx(R,{style:{color:"#f5222d"}}),e.jsx(o,{color:(t==null?void 0:t.type)==="通知"?"blue":(t==null?void 0:t.type)==="公告"?"green":"orange",children:t==null?void 0:t.type}),e.jsx("span",{children:t==null?void 0:t.title})]}),open:D,onCancel:()=>p(!1),footer:[e.jsx(l,{onClick:()=>p(!1),children:"关闭"},"close"),e.jsx(l,{type:"primary",icon:e.jsx(F,{}),onClick:()=>{p(!1),v(t)},children:"编辑"},"edit")],width:800,children:t&&e.jsxs(e.Fragment,{children:[e.jsx(X,{message:e.jsxs(n,{children:[e.jsxs(o,{icon:e.jsx(L,{}),color:"blue",children:[t.publisher,e.jsx("span",{style:{marginLeft:8},children:t.publisherTitle})]}),e.jsx(o,{icon:e.jsx(Z,{}),color:"purple",children:t.department}),e.jsx(o,{icon:e.jsx(b,{}),color:"cyan",children:t.recipients})]}),description:e.jsxs(n,{style:{marginTop:8},children:[e.jsx(K,{})," ",t.publishTime,e.jsx(g,{type:"vertical"}),e.jsx(I,{})," ",t.readCount," 次阅读",e.jsx(g,{type:"vertical"}),e.jsx(o,{color:t.status==="已发布"?"success":"default",children:t.status})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs(d,{children:[e.jsx(re,{style:{fontSize:16,lineHeight:2},children:t.content}),t.attachments.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(g,{children:"附件"}),e.jsx($,{size:"small",dataSource:t.attachments,renderItem:s=>e.jsx($.Item,{children:e.jsxs(n,{children:[e.jsx(f,{}),e.jsx("a",{href:"#",children:s})]})})})]})]})]})})]})};export{Be as default};
