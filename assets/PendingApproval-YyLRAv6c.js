import{r as b,j as e,S as d,B as h,d as Q,g as D,D as q,R as $}from"./index-BWITRwMt.js";import{d as ie}from"./dayjs.min-gRUIGo67.js";import{F as o}from"./index-B4Ba3kjL.js";import{C as u,R as W,a as r,T as N}from"./row-Cnghy05A.js";import{T as le}from"./index-KgziiaPg.js";import{S as w}from"./index-Cvv5Oy9s.js";import{R as E}from"./ClockCircleOutlined-B3LIIh-q.js";import{R as C}from"./ExclamationCircleOutlined-BP4FmF_m.js";import{R as K,a as L,b as oe}from"./FieldTimeOutlined-CEwVZquW.js";import{R as I}from"./ApartmentOutlined-BrTogBa-.js";import{I as A}from"./index-DHsOOk53.js";import{R as ce}from"./SearchOutlined-BYrytDiN.js";import{S as c}from"./index--971HAJd.js";import{D as de}from"./index-Ct2jiMu-.js";import{R as he,a as xe}from"./FilterOutlined-C-tDQmlT.js";import{F as Y}from"./Table-Co4vqh-S.js";import{R as Z}from"./InboxOutlined-Boc0bqlW.js";import{M as F}from"./index-B6GfVDaP.js";import{A as _}from"./index-XeX9iwEh.js";import{T as i}from"./index-Bi3wrssA.js";import{T as me}from"./Timeline-B9RtuhPm.js";import{s as G}from"./index-DUFlJjEf.js";import{R as je}from"./FileTextOutlined-BsTvhI9k.js";import{R as pe}from"./CheckCircleOutlined-DhoaOLGr.js";import"./EditOutlined-OPXnklqI.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./EyeOutlined-BFSnxg4C.js";import"./CalendarOutlined-DKq2sctu.js";const{Title:ue,Text:n,Paragraph:fe}=le,{TextArea:ye}=A,{TabPane:O}=N,{RangePicker:ge}=de,_e=()=>{const[f]=o.useForm(),[U,y]=b.useState(!1),[X,R]=b.useState(!1),[s,P]=b.useState(null),[B]=o.useForm(),[Te,z]=b.useState({}),m=t=>{const a=[],p={leave:{title:"请假申请",icon:e.jsx(Q,{}),contents:["事假","病假","婚假","丧假","产假"],prefix:"QJ"},car:{title:"用车申请",icon:e.jsx(L,{}),contents:["教学实践","学生活动","公务出差","物资采购"],prefix:"YC"},material:{title:"物资申请",icon:e.jsx(Z,{}),contents:["办公用品","教学用品","实验器材","体育器材","电子设备"],prefix:"WZ"}},l=["教务处","学生处","总务处","实验室","体育组"],H=[{name:"王明华",title:"高级教师"},{name:"李秀英",title:"特级教师"},{name:"张建国",title:"高级教师"},{name:"刘淑华",title:"一级教师"},{name:"陈志强",title:"高级教师"},{name:"赵丽娟",title:"特级教师"},{name:"杨光明",title:"一级教师"},{name:"周晓梅",title:"高级教师"},{name:"吴国强",title:"一级教师"},{name:"孙玉兰",title:"高级教师"},{name:"郑伟东",title:"特级教师"},{name:"马丽华",title:"一级教师"}];for(let v=1;v<=8;v++){const g=ie("2025-07-25").subtract(Math.floor(Math.random()*3),"day"),ne=l[Math.floor(Math.random()*l.length)],V=H[Math.floor(Math.random()*H.length)],T=p[t],J=T.contents[Math.floor(Math.random()*T.contents.length)],re=Math.random()>.7?"紧急":"普通",ae=Math.random()>.5?"工作时间":"非工作时间";let x={key:v,id:`${T.prefix}${String(v).padStart(4,"0")}`,type:T.title,icon:T.icon,applicant:V.name,applicantTitle:V.title,department:ne,createTime:g.format("YYYY-MM-DD HH:mm:ss"),urgency:re,submitTime:ae,content:J};if(t==="leave"){const S=Math.floor(Math.random()*5)+1;x={...x,startDate:g.format("YYYY-MM-DD"),endDate:g.add(S,"day").format("YYYY-MM-DD"),days:S,reason:`因${J==="病假"?"身体不适":"个人事务"}申请请假${S}天`}}else t==="car"?x={...x,destination:["市教育局","县实验基地","市体育馆","市图书馆"][Math.floor(Math.random()*4)],startTime:g.format("YYYY-MM-DD HH:mm"),endTime:g.add(Math.floor(Math.random()*8)+2,"hour").format("YYYY-MM-DD HH:mm"),carType:["小型轿车","中型客车","大型客车"][Math.floor(Math.random()*3)]}:t==="material"&&(x={...x,quantity:Math.floor(Math.random()*50)+1,amount:Math.floor(Math.random()*5e3)+500,material:["打印纸","文具","墨盒","投影仪"][Math.floor(Math.random()*4)]});a.push(x)}return a},j=b.useMemo(()=>{const t=m("leave"),a=m("car"),p=m("material");return{total:t.length+a.length+p.length,urgent:t.filter(l=>l.urgency==="紧急").length+a.filter(l=>l.urgency==="紧急").length+p.filter(l=>l.urgency==="紧急").length,leave:t.length,car:a.length,material:p.length,nonWorkingTime:t.filter(l=>l.submitTime==="非工作时间").length+a.filter(l=>l.submitTime==="非工作时间").length+p.filter(l=>l.submitTime==="非工作时间").length}},[]),ee=t=>{P(t),y(!0)},M=(t,a)=>{F.confirm({title:`确认${a?"通过":"拒绝"}该申请？`,icon:e.jsx(C,{}),content:"请认真审核申请信息，审批后将无法撤销",onOk(){P(t),f.setFieldsValue({result:a?"通过":"拒绝",comment:""}),R(!0)}})},te=t=>{console.log("Approval values:",t),G.success(`审批${t.result==="通过"?"通过":"拒绝"}成功`),R(!1),f.resetFields()},se=t=>{console.log("Search values:",t),z(t),G.success("搜索条件已更新")},k=[{title:"申请编号",dataIndex:"id",key:"id",width:100,fixed:"left"},{title:"申请类型",dataIndex:"type",key:"type",width:120,render:(t,a)=>e.jsxs(d,{children:[a.icon,e.jsx("span",{children:t})]})},{title:"申请内容",dataIndex:"content",key:"content",width:120,render:t=>e.jsx(i,{color:"blue",children:t})},{title:"申请人",dataIndex:"applicant",key:"applicant",width:150,render:(t,a)=>e.jsxs(d,{children:[e.jsx($,{}),e.jsx("span",{children:t}),e.jsx(i,{color:"blue",children:a.applicantTitle})]})},{title:"所属部门",dataIndex:"department",key:"department",width:120,render:t=>e.jsxs(d,{children:[e.jsx(I,{}),t]})},{title:"紧急程度",dataIndex:"urgency",key:"urgency",width:100,render:t=>e.jsx(i,{color:t==="紧急"?"red":"default",icon:t==="紧急"?e.jsx(C,{}):null,children:t})},{title:"提交时间",dataIndex:"submitTime",key:"submitTime",width:120,render:t=>e.jsx(i,{color:t==="非工作时间"?"orange":"green",icon:e.jsx(K,{}),children:t})},{title:"申请时间",dataIndex:"createTime",key:"createTime",width:180},{title:"操作",key:"action",width:260,fixed:"right",render:(t,a)=>e.jsxs(d,{children:[e.jsx(h,{type:"link",icon:e.jsx(je,{}),onClick:()=>ee(a),children:"查看详情"}),e.jsx(h,{type:"link",icon:e.jsx(pe,{}),onClick:()=>M(a,!0),children:"通过"}),e.jsx(h,{type:"link",danger:!0,icon:e.jsx(oe,{}),onClick:()=>M(a,!1),children:"拒绝"})]})}];return e.jsxs("div",{children:[e.jsxs(u,{children:[e.jsx(ue,{level:4,children:"待办审批"}),e.jsxs(W,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(r,{span:6,children:e.jsx(u,{children:e.jsx(w,{title:"待办总数",value:j.total,prefix:e.jsx(E,{style:{color:"#1890ff"}})})})}),e.jsx(r,{span:6,children:e.jsx(u,{children:e.jsx(w,{title:"紧急申请",value:j.urgent,valueStyle:{color:"#cf1322"},prefix:e.jsx(C,{})})})}),e.jsx(r,{span:6,children:e.jsx(u,{children:e.jsx(w,{title:"非工作时间",value:j.nonWorkingTime,valueStyle:{color:"#fa8c16"},prefix:e.jsx(K,{})})})}),e.jsx(r,{span:6,children:e.jsx(u,{children:e.jsx(w,{title:"部门分布",value:5,prefix:e.jsx(I,{style:{color:"#52c41a"}}),suffix:"个"})})})]}),e.jsx(u,{style:{marginBottom:16},children:e.jsxs(o,{form:B,layout:"inline",onFinish:se,children:[e.jsx(o.Item,{name:"keyword",children:e.jsx(A,{placeholder:"搜索申请编号/申请人",prefix:e.jsx(ce,{}),style:{width:200}})}),e.jsx(o.Item,{name:"department",children:e.jsxs(c,{placeholder:"选择部门",style:{width:160},allowClear:!0,children:[e.jsx(c.Option,{value:"教务处",children:"教务处"}),e.jsx(c.Option,{value:"学生处",children:"学生处"}),e.jsx(c.Option,{value:"总务处",children:"总务处"}),e.jsx(c.Option,{value:"实验室",children:"实验室"}),e.jsx(c.Option,{value:"体育组",children:"体育组"})]})}),e.jsx(o.Item,{name:"urgency",children:e.jsxs(c,{placeholder:"紧急程度",style:{width:120},allowClear:!0,children:[e.jsx(c.Option,{value:"紧急",children:"紧急"}),e.jsx(c.Option,{value:"普通",children:"普通"})]})}),e.jsx(o.Item,{name:"submitTime",children:e.jsxs(c,{placeholder:"提交时间",style:{width:140},allowClear:!0,children:[e.jsx(c.Option,{value:"工作时间",children:"工作时间"}),e.jsx(c.Option,{value:"非工作时间",children:"非工作时间"})]})}),e.jsx(o.Item,{name:"dateRange",children:e.jsx(ge,{style:{width:240}})}),e.jsx(o.Item,{children:e.jsxs(d,{children:[e.jsx(h,{type:"primary",htmlType:"submit",icon:e.jsx(he,{}),children:"筛选"}),e.jsx(h,{onClick:()=>{B.resetFields(),z({})},children:"重置"})]})})]})}),e.jsxs(N,{defaultActiveKey:"leave",children:[e.jsx(O,{tab:e.jsxs("span",{children:[e.jsx(Q,{}),"请假申请",e.jsx(D,{count:j.leave,offset:[10,-5]})]}),children:e.jsx(Y,{columns:k,dataSource:m("leave"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条记录`},scroll:{x:1300}})},"leave"),e.jsx(O,{tab:e.jsxs("span",{children:[e.jsx(L,{}),"用车申请",e.jsx(D,{count:j.car,offset:[10,-5]})]}),children:e.jsx(Y,{columns:k,dataSource:m("car"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条记录`},scroll:{x:1300}})},"car"),e.jsx(O,{tab:e.jsxs("span",{children:[e.jsx(Z,{}),"物资申请",e.jsx(D,{count:j.material,offset:[10,-5]})]}),children:e.jsx(Y,{columns:k,dataSource:m("material"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条记录`},scroll:{x:1300}})},"material")]})]}),e.jsxs(F,{title:"审批处理",open:X,onOk:()=>f.submit(),onCancel:()=>{R(!1),f.resetFields()},children:[e.jsx(_,{message:"审批提示",description:"请认真审核申请信息，填写审批意见。审批完成后将自动通知申请人。",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs(o,{form:f,layout:"vertical",onFinish:te,children:[e.jsx(o.Item,{name:"result",label:"审批结果",children:e.jsx(A,{disabled:!0})}),e.jsx(o.Item,{name:"comment",label:"审批意见",rules:[{required:!0,message:"请输入审批意见"}],children:e.jsx(ye,{rows:4,placeholder:"请输入详细的审批意见，说明通过或拒绝的原因",showCount:!0,maxLength:200})})]})]}),e.jsx(F,{title:"申请详情",open:U,onCancel:()=>y(!1),footer:[e.jsx(h,{onClick:()=>y(!1),children:"关闭"},"close"),e.jsx(h,{type:"primary",onClick:()=>{y(!1),M(s,!0)},children:"通过"},"approve"),e.jsx(h,{danger:!0,onClick:()=>{y(!1),M(s,!1)},children:"拒绝"},"reject")],width:700,children:s&&e.jsxs(e.Fragment,{children:[e.jsx(_,{message:e.jsxs(d,{children:[e.jsx(i,{color:s.urgency==="紧急"?"red":"default",children:s.urgency}),e.jsx(i,{color:s.submitTime==="非工作时间"?"orange":"green",children:s.submitTime})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsx(q,{orientation:"left",children:"基本信息"}),e.jsxs(W,{gutter:[16,16],children:[e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"申请编号："}),e.jsx(n,{children:s.id})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"申请类型："}),e.jsxs(d,{children:[s.icon,e.jsx(n,{children:s.type})]})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"申请人："}),e.jsxs(d,{children:[e.jsx($,{}),e.jsx(n,{children:s.applicant})]})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"所属部门："}),e.jsxs(d,{children:[e.jsx(I,{}),e.jsx(n,{children:s.department})]})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"申请时间："}),e.jsx(n,{children:s.createTime})]}),s.startDate&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{span:24,children:[e.jsx(n,{type:"secondary",children:"请假类型："}),e.jsx(i,{color:"blue",children:s.content})]}),e.jsxs(r,{span:24,children:[e.jsx(n,{type:"secondary",children:"请假时间："}),e.jsxs(n,{children:[s.startDate," 至 ",s.endDate,"（共",s.days,"天）"]})]}),e.jsxs(r,{span:24,children:[e.jsx(n,{type:"secondary",children:"请假原因："}),e.jsx(fe,{children:s.reason})]})]}),s.destination&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"用车用途："}),e.jsx(i,{color:"blue",children:s.content})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"目的地："}),e.jsx(n,{children:s.destination})]}),e.jsxs(r,{span:24,children:[e.jsx(n,{type:"secondary",children:"用车时间："}),e.jsxs(n,{children:[s.startTime," 至 ",s.endTime]})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"车辆类型："}),e.jsx(n,{children:s.carType})]})]}),s.material&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"物资类型："}),e.jsx(i,{color:"blue",children:s.content})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"物资名称："}),e.jsx(n,{children:s.material})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"申请数量："}),e.jsxs(n,{children:[s.quantity,"个"]})]}),e.jsxs(r,{span:12,children:[e.jsx(n,{type:"secondary",children:"预算金额："}),e.jsxs(n,{children:["¥",s.amount.toFixed(2)]})]})]})]}),e.jsx(q,{orientation:"left",children:"审批流程"}),e.jsx(me,{items:[{color:"blue",children:e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(i,{icon:e.jsx($,{}),color:"blue",children:"申请人"}),e.jsx(n,{children:s.applicant}),e.jsx(i,{color:"blue",children:s.applicantTitle}),e.jsx(i,{icon:e.jsx(I,{}),color:"blue",children:s.department})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx(i,{icon:e.jsx(xe,{}),color:"blue",children:s.createTime}),e.jsx(i,{color:s.urgency==="紧急"?"red":"default",children:s.urgency}),e.jsx(i,{color:s.submitTime==="非工作时间"?"orange":"green",children:s.submitTime})]})]})},{color:"gray",children:e.jsx(i,{icon:e.jsx(E,{}),color:"processing",children:"等待审批"})}]})]})})]})};export{_e as default};
