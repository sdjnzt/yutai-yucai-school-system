import{r as f,j as e,c as N,H as J,S as r,B as m,D as M,R as $,d as R,T as Q}from"./index-BTwOKT3f.js";import{d}from"./dayjs.min-qzHqpoAT.js";import{F as o}from"./index-B5Qs8cXU.js";import{C as a,R as _,a as x}from"./row-BiJ_975k.js";import{T as q}from"./index-BnPCWB4i.js";import{S as j}from"./index-BDN0iJkd.js";import{R as y,a as F}from"./PushpinOutlined-DEQqS4O7.js";import{R as g}from"./ApartmentOutlined-C9l2yoiq.js";import{I as z}from"./index-CkddrLwv.js";import{R as K}from"./SearchOutlined-BK3LhwYJ.js";import{S as n}from"./index-CLpJRL42.js";import{D as U}from"./index-DwOG4EjI.js";import{R as W,a as X}from"./FilterOutlined-Dc8g64Jv.js";import{F as Z}from"./Table-DZlkqFoa.js";import{M as ee}from"./index-rsM9MrC4.js";import{A as te}from"./index-Bacw4X21.js";import{T as c}from"./index-B6q4g7z4.js";import{L as O}from"./index-CqfDNj0S.js";import{R as D}from"./FileTextOutlined-CeMm_n-S.js";import"./EditOutlined-CZuKBKCf.js";import"./EyeOutlined-BU4LtOU3.js";import"./CalendarOutlined-DKq2sctu.js";import"./ClockCircleOutlined-CELcQ7Uv.js";const{Title:se,Text:Me,Paragraph:ie}=q,{RangePicker:ne}=U,{TextArea:$e}=z,Re=()=>{const[B,T]=f.useState(!1),[s,A]=f.useState(null),[I]=o.useForm(),w=()=>{const t=["通知","公告","文件"],i=["教务处","学生处","总务处","实验室","体育组"],S=[{name:"张志远",title:"教务主任"},{name:"李国庆",title:"学生主任"},{name:"王建华",title:"总务主任"},{name:"刘明亮",title:"实验室主任"},{name:"陈学文",title:"体育组长"}],Y=["关于2025学年第一学期期末考试安排的通知","关于举办校园艺术节的公告","关于加强实验室安全管理的通知","2025年暑假放假安排","关于组织教师教学能力提升培训的通知","关于开展学生体质健康测试的通知","关于评选优秀班主任的公告","关于更新教学设备的通知","关于组织学生参加科技创新大赛的通知","关于调整作息时间的通知"],C=[];for(let l=1;l<=10;l++){const h=t[Math.floor(Math.random()*t.length)],u=i[Math.floor(Math.random()*i.length)],v=S.find(G=>G.title.includes(u.slice(0,2)))||S[0],k=Y[l-1],P=Math.random()>.7,V=Math.floor(Math.random()*500)+100,E=d("2025-07-25").subtract(Math.floor(Math.random()*30),"day");C.push({key:l,id:`GG${String(l).padStart(4,"0")}`,type:h,title:k,content:`这是一条${u}发布的${h}，主要内容是关于${k.slice(2,-2)}的相关事项...`,publisher:v.name,publisherTitle:v.title,department:u,publishTime:E.format("YYYY-MM-DD HH:mm:ss"),isTop:P,readCount:V,attachments:Math.random()>.5?["通知文件.pdf","附件材料.docx"]:[],recipients:["全体师生","全体教师","全体学生"][Math.floor(Math.random()*3)]})}return C.sort((l,h)=>l.isTop!==h.isTop?h.isTop?1:-1:d(h.publishTime).valueOf()-d(l.publishTime).valueOf())},p=f.useMemo(()=>{const t=w();return{total:t.length,topCount:t.filter(i=>i.isTop).length,todayCount:t.filter(i=>d(i.publishTime).isSame(d("2025-07-25"),"day")).length,departmentCount:new Set(t.map(i=>i.department)).size}},[]),b=t=>{A(t),T(!0)},H=t=>{console.log("Search values:",t)},L=[{title:"标题",dataIndex:"title",key:"title",width:400,fixed:"left",render:(t,i)=>e.jsxs(r,{children:[i.isTop&&e.jsx(y,{style:{color:"#f5222d"}}),e.jsx(c,{color:i.type==="通知"?"blue":i.type==="公告"?"green":"orange",children:i.type}),e.jsx(m,{type:"link",onClick:()=>b(i),style:{padding:0,height:"auto",whiteSpace:"normal",textAlign:"left"},children:t}),i.attachments.length>0&&e.jsx(Q,{title:i.attachments.join(", "),children:e.jsx(D,{style:{color:"#1890ff"}})})]})},{title:"发布人",dataIndex:"publisher",key:"publisher",width:150,render:(t,i)=>e.jsxs(r,{children:[e.jsx($,{}),e.jsx("span",{children:t}),e.jsx(c,{color:"blue",children:i.publisherTitle})]})},{title:"发布部门",dataIndex:"department",key:"department",width:120,render:t=>e.jsxs(r,{children:[e.jsx(g,{}),e.jsx("span",{children:t})]})},{title:"接收对象",dataIndex:"recipients",key:"recipients",width:120,render:t=>e.jsx(c,{icon:e.jsx(R,{}),color:"purple",children:t})},{title:"发布时间",dataIndex:"publishTime",key:"publishTime",width:180},{title:"阅读量",dataIndex:"readCount",key:"readCount",width:100,render:t=>e.jsxs(r,{children:[e.jsx(F,{}),e.jsx("span",{children:t})]})},{title:"操作",key:"action",width:100,fixed:"right",render:(t,i)=>e.jsx(m,{type:"link",onClick:()=>b(i),children:"查看详情"})}];return e.jsxs("div",{children:[e.jsxs(a,{children:[e.jsx(se,{level:4,children:"通知公告"}),e.jsxs(_,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(x,{span:6,children:e.jsx(a,{children:e.jsx(j,{title:"公告总数",value:p.total,prefix:e.jsx(N,{style:{color:"#1890ff"}})})})}),e.jsx(x,{span:6,children:e.jsx(a,{children:e.jsx(j,{title:"置顶公告",value:p.topCount,prefix:e.jsx(y,{style:{color:"#f5222d"}})})})}),e.jsx(x,{span:6,children:e.jsx(a,{children:e.jsx(j,{title:"今日发布",value:p.todayCount,prefix:e.jsx(J,{style:{color:"#52c41a"}})})})}),e.jsx(x,{span:6,children:e.jsx(a,{children:e.jsx(j,{title:"发布部门",value:p.departmentCount,prefix:e.jsx(g,{style:{color:"#722ed1"}}),suffix:"个"})})})]}),e.jsx(a,{style:{marginBottom:16},children:e.jsxs(o,{form:I,layout:"inline",onFinish:H,children:[e.jsx(o.Item,{name:"keyword",children:e.jsx(z,{placeholder:"搜索标题/内容",prefix:e.jsx(K,{}),style:{width:200}})}),e.jsx(o.Item,{name:"type",children:e.jsxs(n,{placeholder:"公告类型",style:{width:120},allowClear:!0,children:[e.jsx(n.Option,{value:"通知",children:"通知"}),e.jsx(n.Option,{value:"公告",children:"公告"}),e.jsx(n.Option,{value:"文件",children:"文件"})]})}),e.jsx(o.Item,{name:"department",children:e.jsxs(n,{placeholder:"发布部门",style:{width:160},allowClear:!0,children:[e.jsx(n.Option,{value:"教务处",children:"教务处"}),e.jsx(n.Option,{value:"学生处",children:"学生处"}),e.jsx(n.Option,{value:"总务处",children:"总务处"}),e.jsx(n.Option,{value:"实验室",children:"实验室"}),e.jsx(n.Option,{value:"体育组",children:"体育组"})]})}),e.jsx(o.Item,{name:"dateRange",children:e.jsx(ne,{style:{width:240}})}),e.jsx(o.Item,{children:e.jsxs(r,{children:[e.jsx(m,{type:"primary",htmlType:"submit",icon:e.jsx(W,{}),children:"筛选"}),e.jsx(m,{onClick:()=>I.resetFields(),children:"重置"})]})})]})}),e.jsx(Z,{columns:L,dataSource:w(),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条记录`},scroll:{x:1300}})]}),e.jsx(ee,{title:e.jsxs(r,{children:[(s==null?void 0:s.isTop)&&e.jsx(y,{style:{color:"#f5222d"}}),e.jsx(c,{color:(s==null?void 0:s.type)==="通知"?"blue":(s==null?void 0:s.type)==="公告"?"green":"orange",children:s==null?void 0:s.type}),e.jsx("span",{children:s==null?void 0:s.title})]}),open:B,onCancel:()=>T(!1),footer:null,width:800,children:s&&e.jsxs(e.Fragment,{children:[e.jsx(te,{message:e.jsxs(r,{children:[e.jsxs(c,{icon:e.jsx($,{}),color:"blue",children:[s.publisher,e.jsx("span",{style:{marginLeft:8},children:s.publisherTitle})]}),e.jsx(c,{icon:e.jsx(g,{}),color:"purple",children:s.department}),e.jsx(c,{icon:e.jsx(R,{}),color:"cyan",children:s.recipients})]}),description:e.jsxs(r,{style:{marginTop:8},children:[e.jsx(X,{})," ",s.publishTime,e.jsx(M,{type:"vertical"}),e.jsx(F,{})," ",s.readCount," 次阅读"]}),type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs(a,{children:[e.jsx(ie,{style:{fontSize:16,lineHeight:2},children:s.content}),s.attachments.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(M,{children:"附件"}),e.jsx(O,{size:"small",dataSource:s.attachments,renderItem:t=>e.jsx(O.Item,{children:e.jsxs(r,{children:[e.jsx(D,{}),e.jsx("a",{href:"#",children:t})]})})})]})]})]})})]})};export{Re as default};
