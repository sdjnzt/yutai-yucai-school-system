import{r as j,I as oe,j as e,d as de,D as V,i as he,S as O,B as o,T as _,g as K,R as xe}from"./index-BWITRwMt.js";import{F as i}from"./index-B4Ba3kjL.js";import{I as b}from"./index-DHsOOk53.js";import{S as n}from"./index--971HAJd.js";import{R as y,a as r,C as T,T as Q}from"./row-Cnghy05A.js";import{S as B}from"./index-Cvv5Oy9s.js";import{T as x}from"./index-Bi3wrssA.js";import{R as je}from"./SearchOutlined-BYrytDiN.js";import{R as me}from"./PlusOutlined-DTmrJA1a.js";import{R as U,U as pe}from"./UploadOutlined-OzinYyUx.js";import{R as W}from"./DownloadOutlined-D9nW_EX2.js";import{F as ue}from"./Table-Co4vqh-S.js";import{M as L}from"./index-B6GfVDaP.js";import{s as M}from"./index-DUFlJjEf.js";import{R as ge}from"./PhoneOutlined-Bt8GPECc.js";import{R as fe}from"./MailOutlined-DmD4khBi.js";import{R as be,a as ye}from"./EditOutlined-Pz7OHA1y.js";import{P as ve}from"./index-S-_C2KLB.js";import{D as a}from"./index-C30fqYd2.js";import"./EditOutlined-OPXnklqI.js";import"./EyeOutlined-BFSnxg4C.js";import"./DeleteOutlined-DFutYCzo.js";import"./DownloadOutlined-DTidZHln.js";import"./progress-BWK-xv6J.js";var Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560zM610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z"}}]},name:"idcard",theme:"outlined"};function N(){return N=Object.assign?Object.assign.bind():function(d){for(var p=1;p<arguments.length;p++){var m=arguments[p];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(d[v]=m[v])}return d},N.apply(this,arguments)}const Oe=(d,p)=>j.createElement(oe,N({},d,{ref:p,icon:Ie})),Te=j.forwardRef(Oe),{TabPane:J}=Q,Ge=()=>{const[d]=i.useForm(),[p,m]=j.useState(!1),[v,S]=j.useState(null),[G,R]=j.useState(!1),[z,A]=j.useState(null),[C,E]=j.useState([]),[X,H]=j.useState(!1),Y=()=>{const s=[],t=[{name:"语文",type:"文科"},{name:"数学",type:"理科"},{name:"英语",type:"文科"},{name:"物理",type:"理科"},{name:"化学",type:"理科"},{name:"生物",type:"理科"},{name:"政治",type:"文科"},{name:"历史",type:"文科"},{name:"地理",type:"文科"}],u=["高级教师","一级教师","二级教师"],g=["学士","硕士","博士"],I=["班主任","教研组长","年级组长","普通教师"];for(let f=1;f<=90;f++){const k=String(f).padStart(4,"0"),$=t[Math.floor(Math.random()*t.length)],w=Math.random()<.6?"女":"男",F=30+Math.floor(Math.random()*20),q=F-22-Math.floor(Math.random()*5),l=u[Math.floor(Math.random()*u.length)],ae=g[Math.floor(Math.random()*g.length)],ce=I[Math.floor(Math.random()*I.length)];s.push({id:`T${k}`,name:Z(w),gender:w,age:F,subject:$.name,subjectType:$.type,title:l,degree:ae,position:ce,teachingAge:q,phone:`138${String(Math.floor(Math.random()*1e8)).padStart(8,"0")}`,email:`teacher${k}@yutai.edu.cn`,idCard:`37000019${String(75-Math.floor(Math.random()*20)).padStart(2,"0")}${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}${String(Math.floor(Math.random()*9999)).padStart(4,"0")}`,entryDate:`${2025-q}-09-01`,status:"active"})}return s},Z=s=>{const t=["张","李","王","刘","陈","杨","赵","黄","周","吴","徐","孙","马","朱","胡","郭","何","高","林","郑"],u=["伟","强","磊","军","洋","勇","杰","涛","明","超"],g=["芳","娜","秀英","敏","静","丽","艳","秀兰","霞","娟"],I=t[Math.floor(Math.random()*t.length)],f=s==="男"?u[Math.floor(Math.random()*u.length)]:g[Math.floor(Math.random()*g.length)];return I+f},[c]=j.useState(Y()),h=j.useMemo(()=>{const s=c.length,t=c.filter(l=>l.gender==="男").length,u=c.filter(l=>l.gender==="女").length,g=c.filter(l=>l.subjectType==="文科").length,I=c.filter(l=>l.subjectType==="理科").length,f=c.filter(l=>l.title==="高级教师").length,k=c.filter(l=>l.title==="一级教师").length,$=c.filter(l=>l.title==="二级教师").length,w=c.filter(l=>l.degree==="硕士").length,F=c.filter(l=>l.degree==="博士").length,q=c.filter(l=>l.position==="班主任").length;return{total:s,male:t,female:u,artTeachers:g,scienceTeachers:I,seniorTeachers:f,firstLevelTeachers:k,secondLevelTeachers:$,masterDegree:w,doctorDegree:F,headTeachers:q}},[c]),D=[{title:"工号",dataIndex:"id",key:"id",fixed:"left",width:100},{title:"姓名",dataIndex:"name",key:"name",fixed:"left",width:100,render:(s,t)=>e.jsxs(O,{children:[e.jsx("span",{style:{fontWeight:"bold"},children:t.name}),e.jsx(x,{color:t.gender==="男"?"blue":"pink",children:t.gender})]})},{title:"任教学科",dataIndex:"subject",key:"subject",render:(s,t)=>e.jsxs(O,{children:[e.jsx("span",{children:t.subject}),e.jsx(x,{color:t.subjectType==="文科"?"blue":"green",children:t.subjectType})]})},{title:"职称",dataIndex:"title",key:"title",render:s=>{const t=s==="高级教师"?"gold":s==="一级教师"?"blue":"green";return e.jsx(x,{color:t,children:s})}},{title:"学历",dataIndex:"degree",key:"degree",render:s=>{const t=s==="博士"?"purple":s==="硕士"?"blue":"green";return e.jsx(x,{color:t,children:s})}},{title:"职务",dataIndex:"position",key:"position"},{title:"教龄",dataIndex:"teachingAge",key:"teachingAge",render:s=>`${s}年`},{title:"联系方式",key:"contact",render:(s,t)=>e.jsxs(O,{children:[e.jsx(_,{title:t.phone,children:e.jsx(ge,{})}),e.jsx(_,{title:t.email,children:e.jsx(fe,{})})]})},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx(K,{status:"success",text:"在职"})},{title:"操作",key:"action",fixed:"right",width:200,render:(s,t)=>e.jsxs(O,{size:"middle",children:[e.jsx(o,{type:"text",icon:e.jsx(xe,{}),onClick:()=>ee(t),children:"详情"}),e.jsx(o,{type:"text",icon:e.jsx(be,{}),onClick:()=>P(t),children:"编辑"}),e.jsx(ve,{title:"确定要删除这名教师吗？",onConfirm:()=>se(),okText:"确定",cancelText:"取消",children:e.jsx(o,{type:"text",danger:!0,icon:e.jsx(ye,{}),children:"删除"})})]})}],ee=s=>{A(s),R(!0)},P=s=>{S(s),d.setFieldsValue(s),m(!0)},se=s=>{M.success("删除成功")},ne=()=>{d.validateFields().then(s=>{console.log("Form values:",s),d.resetFields(),m(!1),S(null),M.success(v?"修改成功":"添加成功")})},te=s=>{s.file.status==="done"?M.success(`${s.file.name} 文件上传成功`):s.file.status==="error"&&M.error(`${s.file.name} 文件上传失败`)},le=()=>{M.success("导出成功")},re=s=>e.jsxs(a,{column:2,children:[e.jsx(a.Item,{label:"工号",children:s.id}),e.jsxs(a.Item,{label:"姓名",children:[s.name,e.jsx(x,{color:s.gender==="男"?"blue":"pink",style:{marginLeft:8},children:s.gender})]}),e.jsxs(a.Item,{label:"年龄",children:[s.age,"岁"]}),e.jsxs(a.Item,{label:"教龄",children:[s.teachingAge,"年"]}),e.jsxs(a.Item,{label:"任教学科",children:[s.subject,e.jsx(x,{color:s.subjectType==="文科"?"blue":"green",style:{marginLeft:8},children:s.subjectType})]}),e.jsx(a.Item,{label:"职称",children:e.jsx(x,{color:s.title==="高级教师"?"gold":s.title==="一级教师"?"blue":"green",children:s.title})}),e.jsx(a.Item,{label:"学历",children:e.jsx(x,{color:s.degree==="博士"?"purple":s.degree==="硕士"?"blue":"green",children:s.degree})}),e.jsx(a.Item,{label:"职务",children:s.position}),e.jsx(a.Item,{label:"手机号码",children:s.phone}),e.jsx(a.Item,{label:"电子邮箱",children:s.email}),e.jsx(a.Item,{label:"身份证号",span:2,children:s.idCard}),e.jsx(a.Item,{label:"入职日期",children:s.entryDate}),e.jsx(a.Item,{label:"状态",children:e.jsx(K,{status:"success",text:"在职"})})]}),ie=[{name:"searchName",label:"姓名",component:e.jsx(b,{placeholder:"请输入姓名"})},{name:"searchSubject",label:"任教学科",component:e.jsxs(n,{placeholder:"请选择学科",children:[e.jsx(n.Option,{value:"语文",children:"语文"}),e.jsx(n.Option,{value:"数学",children:"数学"}),e.jsx(n.Option,{value:"英语",children:"英语"}),e.jsx(n.Option,{value:"物理",children:"物理"}),e.jsx(n.Option,{value:"化学",children:"化学"}),e.jsx(n.Option,{value:"生物",children:"生物"}),e.jsx(n.Option,{value:"政治",children:"政治"}),e.jsx(n.Option,{value:"历史",children:"历史"}),e.jsx(n.Option,{value:"地理",children:"地理"})]})},{name:"searchTitle",label:"职称",component:e.jsxs(n,{placeholder:"请选择职称",children:[e.jsx(n.Option,{value:"高级教师",children:"高级教师"}),e.jsx(n.Option,{value:"一级教师",children:"一级教师"}),e.jsx(n.Option,{value:"二级教师",children:"二级教师"})]})},{name:"searchPosition",label:"职务",component:e.jsxs(n,{placeholder:"请选择职务",children:[e.jsx(n.Option,{value:"班主任",children:"班主任"}),e.jsx(n.Option,{value:"教研组长",children:"教研组长"}),e.jsx(n.Option,{value:"年级组长",children:"年级组长"}),e.jsx(n.Option,{value:"普通教师",children:"普通教师"})]})}];return e.jsxs("div",{children:[e.jsxs(y,{gutter:16,style:{marginBottom:16},children:[e.jsx(r,{span:8,children:e.jsxs(T,{children:[e.jsx(B,{title:"教师总数",value:h.total,prefix:e.jsx(de,{}),suffix:"人"}),e.jsx(V,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["男教师：",h.male,"人"]}),e.jsxs("span",{children:["女教师：",h.female,"人"]})]})]})}),e.jsx(r,{span:8,children:e.jsxs(T,{children:[e.jsx(B,{title:"学科分布",value:h.artTeachers+h.scienceTeachers,prefix:e.jsx(he,{}),suffix:"人"}),e.jsx(V,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(x,{color:"blue",children:["文科：",h.artTeachers,"人"]}),e.jsxs(x,{color:"green",children:["理科：",h.scienceTeachers,"人"]})]})]})}),e.jsx(r,{span:8,children:e.jsxs(T,{children:[e.jsx(B,{title:"职称结构",value:h.seniorTeachers,prefix:e.jsx(Te,{}),suffix:"名高级教师"}),e.jsx(V,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["一级：",h.firstLevelTeachers,"人"]}),e.jsxs("span",{children:["二级：",h.secondLevelTeachers,"人"]})]})]})})]}),e.jsx(T,{style:{marginBottom:16},children:e.jsxs(Q,{defaultActiveKey:"search",children:[e.jsx(J,{tab:"搜索筛选",children:e.jsxs(i,{layout:"inline",style:{marginBottom:16},children:[e.jsx(y,{gutter:16,style:{marginBottom:16},children:ie.map(s=>e.jsx(r,{xs:24,sm:12,md:8,lg:6,children:e.jsx(i.Item,{name:s.name,label:s.label,children:s.component})},s.name))}),e.jsx(y,{children:e.jsx(r,{span:24,style:{textAlign:"right"},children:e.jsxs(O,{children:[e.jsx(o,{children:"重置"}),e.jsx(o,{type:"primary",icon:e.jsx(je,{}),children:"搜索"})]})})})]})},"search"),e.jsx(J,{tab:"批量操作",children:e.jsxs(O,{size:"middle",children:[e.jsx(o,{type:"primary",icon:e.jsx(me,{}),onClick:()=>{S(null),d.resetFields(),m(!0)},children:"添加教师"}),e.jsx(o,{icon:e.jsx(U,{}),onClick:()=>H(!0),children:"批量导入"}),e.jsx(o,{icon:e.jsx(W,{}),disabled:C.length===0,onClick:le,children:"导出选中"}),e.jsxs("span",{style:{marginLeft:8},children:["已选择"," ",e.jsx("a",{style:{fontWeight:600},children:C.length})," 项",C.length>0&&e.jsx(o,{type:"link",onClick:()=>E([]),children:"清空"})]})]})},"batch")]})}),e.jsx(T,{children:e.jsx(ue,{columns:D,dataSource:c,rowKey:"id",scroll:{x:1500},rowSelection:{selectedRowKeys:C,onChange:E},pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 名教师`}})}),e.jsx(L,{title:v?"编辑教师":"添加教师",open:p,onOk:ne,onCancel:()=>{m(!1),S(null),d.resetFields()},width:800,children:e.jsxs(i,{form:d,layout:"vertical",children:[e.jsxs(y,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],children:e.jsx(b,{placeholder:"请输入姓名"})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}],children:e.jsxs(n,{placeholder:"请选择性别",children:[e.jsx(n.Option,{value:"男",children:"男"}),e.jsx(n.Option,{value:"女",children:"女"})]})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"age",label:"年龄",rules:[{required:!0,message:"请输入年龄"}],children:e.jsx(b,{type:"number",placeholder:"请输入年龄"})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"subject",label:"任教学科",rules:[{required:!0,message:"请选择学科"}],children:e.jsxs(n,{placeholder:"请选择学科",children:[e.jsx(n.Option,{value:"语文",children:"语文"}),e.jsx(n.Option,{value:"数学",children:"数学"}),e.jsx(n.Option,{value:"英语",children:"英语"}),e.jsx(n.Option,{value:"物理",children:"物理"}),e.jsx(n.Option,{value:"化学",children:"化学"}),e.jsx(n.Option,{value:"生物",children:"生物"}),e.jsx(n.Option,{value:"政治",children:"政治"}),e.jsx(n.Option,{value:"历史",children:"历史"}),e.jsx(n.Option,{value:"地理",children:"地理"})]})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"title",label:"职称",rules:[{required:!0,message:"请选择职称"}],children:e.jsxs(n,{placeholder:"请选择职称",children:[e.jsx(n.Option,{value:"高级教师",children:"高级教师"}),e.jsx(n.Option,{value:"一级教师",children:"一级教师"}),e.jsx(n.Option,{value:"二级教师",children:"二级教师"})]})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"degree",label:"学历",rules:[{required:!0,message:"请选择学历"}],children:e.jsxs(n,{placeholder:"请选择学历",children:[e.jsx(n.Option,{value:"博士",children:"博士"}),e.jsx(n.Option,{value:"硕士",children:"硕士"}),e.jsx(n.Option,{value:"学士",children:"学士"})]})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"position",label:"职务",rules:[{required:!0,message:"请选择职务"}],children:e.jsxs(n,{placeholder:"请选择职务",children:[e.jsx(n.Option,{value:"班主任",children:"班主任"}),e.jsx(n.Option,{value:"教研组长",children:"教研组长"}),e.jsx(n.Option,{value:"年级组长",children:"年级组长"}),e.jsx(n.Option,{value:"普通教师",children:"普通教师"})]})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"phone",label:"手机号码",rules:[{required:!0,message:"请输入手机号码"}],children:e.jsx(b,{placeholder:"请输入手机号码"})})}),e.jsx(r,{span:8,children:e.jsx(i.Item,{name:"email",label:"电子邮箱",rules:[{required:!0,message:"请输入电子邮箱"}],children:e.jsx(b,{placeholder:"请输入电子邮箱"})})})]}),e.jsxs(y,{gutter:16,children:[e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"idCard",label:"身份证号",rules:[{required:!0,message:"请输入身份证号"}],children:e.jsx(b,{placeholder:"请输入身份证号"})})}),e.jsx(r,{span:12,children:e.jsx(i.Item,{name:"entryDate",label:"入职日期",rules:[{required:!0,message:"请选择入职日期"}],children:e.jsx(b,{type:"date"})})})]})]})}),e.jsx(L,{title:"教师详细信息",open:G,onCancel:()=>{R(!1),A(null)},footer:[e.jsx(o,{onClick:()=>R(!1),children:"关闭"},"close"),e.jsx(o,{type:"primary",onClick:()=>{R(!1),P(z)},children:"编辑"},"edit")],width:800,children:z&&re(z)}),e.jsxs(L,{title:"批量导入教师",open:X,onCancel:()=>H(!1),footer:null,children:[e.jsxs(pe.Dragger,{name:"file",action:"/api/teacher/import",onChange:te,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(U,{})}),e.jsx("p",{className:"ant-upload-text",children:"点击或拖拽文件到此区域上传"}),e.jsx("p",{className:"ant-upload-hint",children:"支持 .xlsx, .xls 格式的文件"})]}),e.jsx("div",{style:{marginTop:16},children:e.jsx(o,{type:"link",icon:e.jsx(W,{}),children:"下载导入模板"})})]})]})};export{Ge as default};
