import{r as i,I as U,j as e,c as G,D as _,g as F,S as T,B as h,R as Fe,T as Z,h as Te}from"./index-BVFfJd3t.js";import{F as g}from"./index-BiEj9eP2.js";import{I as x}from"./index-Bc9A0WOF.js";import{S as f}from"./index-BO6PDH99.js";import{R as z,a as v,C as S,T as ae}from"./row-DAkbptQ2.js";import{S as L}from"./index-dB5dkvR9.js";import{R as ze}from"./ClockCircleOutlined-BLWFv8w4.js";import{R as qe}from"./SearchOutlined-MYHhB8hV.js";import{R as Pe}from"./PlusOutlined-BPvFPdQs.js";import{R as Ve,U as Be}from"./UploadOutlined-Vt--irDO.js";import{R as ee}from"./DownloadOutlined-enYdzqOR.js";import{F as Ee}from"./Table-FIrAwD9v.js";import{M as q}from"./index-B6UrwPW0.js";import{R as _e}from"./InboxOutlined-BlXW-lWn.js";import{s as p}from"./index-Ip_IvEgE.js";import{R as Le,a as Ae}from"./EditOutlined-DeFFJCIX.js";import{R as Ne}from"./FileTextOutlined-CaV4RNvh.js";import{D as d}from"./index-C0nkrdwE.js";import{R as Ke}from"./ExclamationCircleOutlined-DB-h4YNb.js";import"./EditOutlined-D7TqcQsM.js";import"./EyeOutlined-BsOnOFxh.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./DeleteOutlined-DFutYCzo.js";import"./DownloadOutlined-DTidZHln.js";import"./progress-CPZE-WXF.js";var Ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"},He={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},We={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712.8 548.8c53.6-53.6 83.2-125 83.2-200.8 0-75.9-29.5-147.2-83.2-200.8C659.2 93.6 587.8 64 512 64s-147.2 29.5-200.8 83.2C257.6 200.9 228 272.1 228 348c0 63.8 20.9 124.4 59.4 173.9 7.3 9.4 15.2 18.3 23.7 26.9 8.5 8.5 17.5 16.4 26.8 23.7 39.6 30.8 86.3 50.4 136.1 57V736H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h114v140c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V812h114c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H550V629.5c61.5-8.2 118.2-36.1 162.8-80.7zM512 556c-55.6 0-107.7-21.6-147.1-60.9C325.6 455.8 304 403.6 304 348s21.6-107.7 60.9-147.1C404.2 161.5 456.4 140 512 140s107.7 21.6 147.1 60.9C698.4 240.2 720 292.4 720 348s-21.6 107.7-60.9 147.1C619.7 534.4 567.6 556 512 556z"}}]},name:"woman",theme:"outlined"};function A(){return A=Object.assign?Object.assign.bind():function(n){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(n[a]=c[a])}return n},A.apply(this,arguments)}const Ye=(n,l)=>i.createElement(U,A({},n,{ref:l,icon:Ue})),te=i.forwardRef(Ye);function N(){return N=Object.assign?Object.assign.bind():function(n){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(n[a]=c[a])}return n},N.apply(this,arguments)}const Je=(n,l)=>i.createElement(U,N({},n,{ref:l,icon:He})),Qe=i.forwardRef(Je);function K(){return K=Object.assign?Object.assign.bind():function(n){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(n[a]=c[a])}return n},K.apply(this,arguments)}const Xe=(n,l)=>i.createElement(U,K({},n,{ref:l,icon:We})),se=i.forwardRef(Xe),{Option:o}=f,{confirm:Ge}=q,{Dragger:Ze}=Be,{TabPane:ne}=ae,Mt=()=>{const[n]=g.useForm(),[l]=g.useForm(),[c,a]=i.useState(!1),[re,I]=i.useState(!1),[le,P]=i.useState(!1),[b,C]=i.useState(null),[$,H]=i.useState([]),oe=()=>{const t=[],s=["高一","高二","高三"],R=["山东省济宁市鱼台县鱼城街道","山东省济宁市鱼台县老城街道","山东省济宁市鱼台县王鲁镇","山东省济宁市鱼台县张黄镇","山东省济宁市鱼台县罗屯镇","山东省济宁市鱼台县清河镇"],k=["张","李","王","刘","陈","杨","赵","黄","周","吴","徐","孙","马","朱","胡","郭","何","高","林","郑"],O=["伟","芳","娜","秀英","敏","静","丽","强","磊","军","洋","勇","艳","杰","涛","明","超","秀兰","霞","平"],D=["active","active","active","active","active","inactive","transferred"];return s.forEach((y,B)=>{for(let j=1;j<=8;j++)for(let w=1;w<=50;w++){const r=2025-B,be=`${r}07${String(j).padStart(2,"0")}${String(w).padStart(2,"0")}`,E=k[Math.floor(Math.random()*k.length)],ye=O[Math.floor(Math.random()*O.length)],we=E+ye,Q=Math.random()<.5?"男":"女",X=(y==="高一"?16:y==="高二"?17:18)+Math.floor(Math.random()*2),Se=`138${String(Math.floor(Math.random()*1e8)).padStart(8,"0")}`,Ie=`139${String(Math.floor(Math.random()*1e8)).padStart(8,"0")}`,Ce=R[Math.floor(Math.random()*R.length)],$e=String(2025-X).slice(-2),Me=String(Math.floor(Math.random()*12)+1).padStart(2,"0"),Re=String(Math.floor(Math.random()*28)+1).padStart(2,"0"),ke=`37000020${$e}${Me}${Re}${String(Math.floor(Math.random()*1e4)).padStart(4,"0")}`,Oe=`${r}-09-01`,De=D[Math.floor(Math.random()*D.length)];t.push({id:be,name:we,gender:Q,age:X,grade:y,class:String(j),phone:Se,address:Ce,guardian:Q==="男"?E+"父":E+"母",guardianPhone:Ie,status:De,enrollmentDate:Oe,idCard:ke})}}),t},[m]=i.useState(oe()),ie=[{title:"学号",dataIndex:"id",key:"id",width:100,fixed:"left",sorter:(t,s)=>t.id.localeCompare(s.id)},{title:"姓名",dataIndex:"name",key:"name",width:100,fixed:"left",render:(t,s)=>e.jsxs(T,{children:[e.jsx(Fe,{}),e.jsx("a",{onClick:()=>J(s),children:t})]})},{title:"性别",dataIndex:"gender",key:"gender",width:80,filters:[{text:"男",value:"男"},{text:"女",value:"女"}],onFilter:(t,s)=>s.gender===t},{title:"年级班级",key:"gradeClass",width:120,render:(t,s)=>`${s.grade}(${s.class})班`,filters:[{text:"高一",value:"高一"},{text:"高二",value:"高二"},{text:"高三",value:"高三"}],onFilter:(t,s)=>s.grade===t},{title:"联系电话",dataIndex:"phone",key:"phone",width:120},{title:"监护人",key:"guardianInfo",width:200,render:(t,s)=>e.jsxs("span",{children:[s.guardian," (",s.guardianPhone,")"]})},{title:"家庭住址",dataIndex:"address",key:"address",width:200,ellipsis:!0},{title:"入学日期",dataIndex:"enrollmentDate",key:"enrollmentDate",width:120,sorter:(t,s)=>new Date(t.enrollmentDate)-new Date(s.enrollmentDate)},{title:"状态",dataIndex:"status",key:"status",width:100,render:t=>{const s={active:{color:"success",text:"在读"},inactive:{color:"default",text:"休学"},graduated:{color:"processing",text:"毕业"},transferred:{color:"warning",text:"转学"}};return e.jsx(F,{status:s[t].color,text:s[t].text})},filters:[{text:"在读",value:"active"},{text:"休学",value:"inactive"},{text:"毕业",value:"graduated"},{text:"转学",value:"transferred"}],onFilter:(t,s)=>s.status===t},{title:"操作",key:"action",width:120,fixed:"right",render:(t,s)=>e.jsxs(T,{size:"middle",children:[e.jsx(Z,{title:"编辑",children:e.jsx(h,{type:"text",icon:e.jsx(Le,{}),onClick:()=>W(s)})}),e.jsx(Z,{title:"更多操作",children:e.jsx(Te,{menu:{items:[{key:"details",label:"查看详情",icon:e.jsx(Ne,{}),onClick:()=>J(s)},{key:"delete",label:"删除",icon:e.jsx(Ae,{}),danger:!0,onClick:()=>pe(s)}]},children:e.jsx(h,{type:"text",icon:e.jsx(Qe,{})})})})]})}],ce=[{name:"keyword",label:"关键字",component:e.jsx(x,{placeholder:"学号/姓名/电话"})},{name:"grade",label:"年级",component:e.jsxs(f,{placeholder:"请选择年级",allowClear:!0,children:[e.jsx(o,{value:"高一",children:"高一"}),e.jsx(o,{value:"高二",children:"高二"}),e.jsx(o,{value:"高三",children:"高三"})]})},{name:"class",label:"班级",component:e.jsx(f,{placeholder:"请选择班级",allowClear:!0,children:[...Array(10)].map((t,s)=>e.jsxs(o,{value:String(s+1),children:[s+1,"班"]},s+1))})},{name:"status",label:"状态",component:e.jsxs(f,{placeholder:"请选择状态",allowClear:!0,children:[e.jsx(o,{value:"active",children:"在读"}),e.jsx(o,{value:"inactive",children:"休学"}),e.jsx(o,{value:"graduated",children:"毕业"}),e.jsx(o,{value:"transferred",children:"转学"})]})}],de=[{name:"id",label:"学号",rules:[{required:!0,message:"请输入学号"}],component:e.jsx(x,{disabled:!!b})},{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],component:e.jsx(x,{})},{name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}],component:e.jsxs(f,{children:[e.jsx(o,{value:"男",children:"男"}),e.jsx(o,{value:"女",children:"女"})]})},{name:"grade",label:"年级",rules:[{required:!0,message:"请选择年级"}],component:e.jsxs(f,{children:[e.jsx(o,{value:"高一",children:"高一"}),e.jsx(o,{value:"高二",children:"高二"}),e.jsx(o,{value:"高三",children:"高三"})]})},{name:"class",label:"班级",rules:[{required:!0,message:"请选择班级"}],component:e.jsx(f,{children:[...Array(10)].map((t,s)=>e.jsxs(o,{value:String(s+1),children:[s+1,"班"]},s+1))})},{name:"phone",label:"联系电话",rules:[{required:!0,message:"请输入联系电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],component:e.jsx(x,{})},{name:"guardian",label:"监护人",rules:[{required:!0,message:"请输入监护人姓名"}],component:e.jsx(x,{})},{name:"guardianPhone",label:"监护人电话",rules:[{required:!0,message:"请输入监护人电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],component:e.jsx(x,{})},{name:"address",label:"家庭住址",rules:[{required:!0,message:"请输入家庭住址"}],component:e.jsx(x,{})},{name:"enrollmentDate",label:"入学日期",rules:[{required:!0,message:"请选择入学日期"}],component:e.jsx(x,{type:"date"})},{name:"idCard",label:"身份证号",rules:[{required:!0,message:"请输入身份证号"},{pattern:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,message:"请输入正确的身份证号"}],component:e.jsx(x,{})},{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态"}],component:e.jsxs(f,{children:[e.jsx(o,{value:"active",children:"在读"}),e.jsx(o,{value:"inactive",children:"休学"}),e.jsx(o,{value:"graduated",children:"毕业"}),e.jsx(o,{value:"transferred",children:"转学"})]})}],me={name:"file",multiple:!1,accept:".xlsx,.xls",beforeUpload:async t=>{a(!0);try{console.log("导入文件：",t),await new Promise(s=>setTimeout(s,1500)),p.success("导入成功"),P(!1)}catch(s){console.error("导入失败：",s),p.error("导入失败")}finally{a(!1)}return!1},showUploadList:!1},he=t=>{a(!0);try{console.log("搜索条件：",t),setTimeout(()=>{a(!1)},500)}catch(s){console.error("搜索失败：",s),p.error("搜索失败"),a(!1)}},ue=()=>{l.resetFields()},xe=async t=>{a(!0);try{console.log("提交数据：",t),await new Promise(s=>setTimeout(s,1e3)),p.success(`${b?"编辑":"添加"}成功`),I(!1),n.resetFields(),C(null)}catch(s){console.error(`${b?"编辑":"添加"}失败：`,s),p.error(`${b?"编辑":"添加"}失败`)}finally{a(!1)}},W=t=>{C(t),n.setFieldsValue(t),I(!0)},pe=t=>{Ge({title:"确认删除",icon:e.jsx(Ke,{}),content:`确定要删除学生"${t.name}"吗？`,onOk(){console.log("删除学生：",t),p.success("删除成功")}})},u=i.useMemo(()=>{const t=m.length,s=m.filter(r=>r.gender==="男").length,R=m.filter(r=>r.gender==="女").length,k=m.filter(r=>r.status==="active").length,O=m.filter(r=>r.status==="inactive").length,D=m.filter(r=>r.status==="transferred").length,y=new Set(m.map(r=>`${r.grade}-${r.class}`)).size,B=m.filter(r=>r.grade==="高一").length,j=m.filter(r=>r.grade==="高二").length,w=m.filter(r=>r.grade==="高三").length;return{total:t,male:s,female:R,active:k,inactive:O,transferred:D,classCount:y,gradeOne:B,gradeTwo:j,gradeThree:w}},[m]),fe=t=>e.jsxs(d,{bordered:!0,column:2,children:[e.jsx(d.Item,{label:"学号",span:1,children:t.id}),e.jsx(d.Item,{label:"姓名",span:1,children:t.name}),e.jsxs(d.Item,{label:"性别",span:1,children:[t.gender==="男"?e.jsx(te,{style:{color:"#1890ff"}}):e.jsx(se,{style:{color:"#eb2f96"}})," ",t.gender]}),e.jsxs(d.Item,{label:"年龄",span:1,children:[t.age,"岁"]}),e.jsxs(d.Item,{label:"年级班级",span:2,children:[t.grade,"（",t.class,"）班"]}),e.jsx(d.Item,{label:"联系电话",span:2,children:t.phone}),e.jsx(d.Item,{label:"家庭住址",span:2,children:t.address}),e.jsx(d.Item,{label:"监护人",span:1,children:t.guardian}),e.jsx(d.Item,{label:"监护人电话",span:1,children:t.guardianPhone}),e.jsx(d.Item,{label:"入学日期",span:1,children:t.enrollmentDate}),e.jsx(d.Item,{label:"学籍状态",span:1,children:e.jsx(F,{status:t.status==="active"?"success":t.status==="inactive"?"default":t.status==="transferred"?"warning":"default",text:t.status==="active"?"在读":t.status==="inactive"?"休学":t.status==="transferred"?"转学":"未知"})}),e.jsx(d.Item,{label:"身份证号",span:2,children:t.idCard})]}),[je,M]=i.useState(!1),[V,Y]=i.useState(null),J=t=>{Y(t),M(!0)},ge=async()=>{a(!0);try{await new Promise(t=>setTimeout(t,1e3)),p.success("导出成功")}catch(t){console.error("导出失败：",t),p.error("导出失败")}finally{a(!1)}},ve={selectedRowKeys:$,onChange:t=>H(t)};return e.jsxs("div",{children:[e.jsxs(z,{gutter:16,style:{marginBottom:16},children:[e.jsx(v,{span:8,children:e.jsxs(S,{children:[e.jsx(L,{title:"学生总数",value:u.total,prefix:e.jsx(G,{}),suffix:"人"}),e.jsx(_,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsx(te,{style:{color:"#1890ff"}})," 男生：",u.male,"人"]}),e.jsxs("span",{children:[e.jsx(se,{style:{color:"#eb2f96"}})," 女生：",u.female,"人"]})]})]})}),e.jsx(v,{span:8,children:e.jsxs(S,{children:[e.jsx(L,{title:"班级分布",value:u.classCount,prefix:e.jsx(G,{}),suffix:"个班"}),e.jsx(_,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["高一：",u.gradeOne,"人"]}),e.jsxs("span",{children:["高二：",u.gradeTwo,"人"]}),e.jsxs("span",{children:["高三：",u.gradeThree,"人"]})]})]})}),e.jsx(v,{span:8,children:e.jsxs(S,{children:[e.jsx(L,{title:"学籍状态",value:u.active,prefix:e.jsx(ze,{}),suffix:"人在读"}),e.jsx(_,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[e.jsx(F,{status:"default"})," 休学：",u.inactive,"人"]}),e.jsxs("span",{children:[e.jsx(F,{status:"warning"})," 转学：",u.transferred,"人"]})]})]})})]}),e.jsx(S,{style:{marginBottom:16},children:e.jsxs(ae,{defaultActiveKey:"search",children:[e.jsx(ne,{tab:"搜索筛选",children:e.jsxs(g,{form:l,onFinish:he,layout:"inline",style:{marginBottom:16},children:[e.jsx(z,{gutter:16,style:{marginBottom:16},children:ce.map(t=>e.jsx(v,{xs:24,sm:12,md:8,lg:6,children:e.jsx(g.Item,{name:t.name,label:t.label,children:t.component})},t.name))}),e.jsx(z,{children:e.jsx(v,{span:24,style:{textAlign:"right"},children:e.jsxs(T,{children:[e.jsx(h,{onClick:ue,children:"重置"}),e.jsx(h,{type:"primary",htmlType:"submit",icon:e.jsx(qe,{}),children:"搜索"})]})})})]})},"search"),e.jsx(ne,{tab:"批量操作",children:e.jsxs(T,{size:"middle",children:[e.jsx(h,{type:"primary",icon:e.jsx(Pe,{}),onClick:()=>{C(null),n.resetFields(),I(!0)},children:"添加学生"}),e.jsx(h,{icon:e.jsx(Ve,{}),onClick:()=>P(!0),children:"批量导入"}),e.jsx(h,{icon:e.jsx(ee,{}),disabled:$.length===0,onClick:ge,children:"导出选中"}),e.jsxs("span",{style:{marginLeft:8},children:["已选择"," ",e.jsx("a",{style:{fontWeight:600},children:$.length})," 项",$.length>0&&e.jsx(h,{type:"link",onClick:()=>H([]),children:"清空"})]})]})},"batch")]})}),e.jsx(S,{children:e.jsx(Ee,{rowSelection:ve,columns:ie,dataSource:m,rowKey:"id",scroll:{x:1500},loading:c,pagination:{showQuickJumper:!0,showSizeChanger:!0,showTotal:t=>`共 ${t} 条记录`,pageSize:10,pageSizeOptions:["10","20","50","100"]}})}),e.jsx(q,{title:`${b?"编辑":"添加"}学生`,open:re,onCancel:()=>{I(!1),n.resetFields(),C(null)},onOk:n.submit,width:800,confirmLoading:c,children:e.jsx(g,{form:n,onFinish:xe,labelCol:{span:6},wrapperCol:{span:16},children:e.jsx(z,{gutter:16,children:de.map(t=>e.jsx(v,{span:12,children:e.jsx(g.Item,{name:t.name,label:t.label,rules:t.rules,children:t.component})},t.name))})})}),e.jsxs(q,{title:"批量导入学生",open:le,onCancel:()=>P(!1),footer:null,children:[e.jsxs(Ze,{...me,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(_e,{})}),e.jsx("p",{className:"ant-upload-text",children:"点击或拖拽文件到此区域上传"}),e.jsx("p",{className:"ant-upload-hint",children:"支持 .xlsx, .xls 格式的Excel文件"})]}),e.jsx("div",{style:{marginTop:16},children:e.jsx(h,{type:"link",icon:e.jsx(ee,{}),onClick:()=>p.success("模板下载成功"),children:"下载导入模板"})})]}),e.jsx(q,{title:"学生详细信息",open:je,onCancel:()=>{M(!1),Y(null)},footer:[e.jsx(h,{onClick:()=>M(!1),children:"关闭"},"close"),e.jsx(h,{type:"primary",onClick:()=>{M(!1),W(V)},children:"编辑"},"edit")],width:800,children:V&&fe(V)})]})};export{Mt as default};
