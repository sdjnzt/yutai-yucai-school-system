import{r as f,j as e,S as d,B as b,D as R,d as P,R as L}from"./index-GgCtaIGn.js";import{C as g,R as A,a as o}from"./row-DkXY2Vpz.js";import{S as p}from"./index-BC_b-_9i.js";import{T as h}from"./index-SqXxCpUy.js";import{R as _}from"./PrinterOutlined-jp7RQ_eJ.js";import{R as q}from"./DownloadOutlined-CSN_M5gL.js";import{A as H}from"./index-Bf_beJbf.js";import{S as I}from"./index-B2tiHzLX.js";import{R as J}from"./ClockCircleOutlined-Cuvl7mCO.js";import{T as K}from"./index-CcFIDmFY.js";import{F as N}from"./Table-BgKgGR4G.js";import{s as k}from"./index-C6tIceSr.js";import{R as Q}from"./EnvironmentOutlined-DJhH97uC.js";import"./DownloadOutlined-DTidZHln.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./EditOutlined-lBA9r8Oc.js";const{Title:U}=K,he=()=>{const[n,w]=f.useState(null),[x,D]=f.useState("1"),y=[{id:"G1C1",name:"高一(1)班",type:"文科"},{id:"G1C2",name:"高一(2)班",type:"文科"},{id:"G1C3",name:"高一(3)班",type:"文科"},{id:"G1C4",name:"高一(4)班",type:"文科"},{id:"G1C5",name:"高一(5)班",type:"理科"},{id:"G1C6",name:"高一(6)班",type:"理科"},{id:"G1C7",name:"高一(7)班",type:"理科"},{id:"G1C8",name:"高一(8)班",type:"理科"},{id:"G2C1",name:"高二(1)班",type:"文科"},{id:"G2C2",name:"高二(2)班",type:"文科"},{id:"G2C3",name:"高二(3)班",type:"文科"},{id:"G2C4",name:"高二(4)班",type:"文科"},{id:"G2C5",name:"高二(5)班",type:"理科"},{id:"G2C6",name:"高二(6)班",type:"理科"},{id:"G2C7",name:"高二(7)班",type:"理科"},{id:"G2C8",name:"高二(8)班",type:"理科"},{id:"G3C1",name:"高三(1)班",type:"文科"},{id:"G3C2",name:"高三(2)班",type:"文科"},{id:"G3C3",name:"高三(3)班",type:"文科"},{id:"G3C4",name:"高三(4)班",type:"文科"},{id:"G3C5",name:"高三(5)班",type:"理科"},{id:"G3C6",name:"高三(6)班",type:"理科"},{id:"G3C7",name:"高三(7)班",type:"理科"},{id:"G3C8",name:"高三(8)班",type:"理科"}],E=[{id:1,name:"第一节",time:"08:00-08:45"},{id:2,name:"第二节",time:"08:55-09:40"},{id:3,name:"第三节",time:"10:00-10:45"},{id:4,name:"第四节",time:"10:55-11:40"},{id:5,name:"第五节",time:"14:00-14:45"},{id:6,name:"第六节",time:"14:55-15:40"},{id:7,name:"第七节",time:"16:00-16:45"},{id:8,name:"第八节",time:"16:55-17:40"}],M=t=>{if(!t)return[];const c=y.find(m=>m.id===t).type==="文科"?["语文","数学","英语","政治","历史","地理"]:["语文","数学","英语","物理","化学","生物"],i=["A101","A102","A103","A201","A202","A203"],a={语文:"张明",数学:"李芳",英语:"王静",物理:"陈强",化学:"杨丽",生物:"赵伟",政治:"周婷",历史:"吴超",地理:"郑阳"},G=[];return E.forEach(m=>{const v={key:m.id,period:m.name,time:m.time};["monday","tuesday","wednesday","thursday","friday"].forEach(O=>{if(Math.random()<.8){const S=c[Math.floor(Math.random()*c.length)];v[O]={subject:S,teacher:a[S],room:i[Math.floor(Math.random()*i.length)]}}}),G.push(v)}),G},z=t=>{w(t)},T=t=>{D(t)},B=()=>{k.success("正在打印课程表")},$=()=>{k.success("课程表已导出")},u=f.useMemo(()=>n?M(n):[],[n,x]),F=()=>{if(!u.length)return null;let t=0,s={},C=new Set,c=new Set;return u.forEach(i=>{["monday","tuesday","wednesday","thursday","friday"].forEach(a=>{i[a]&&(t++,s[i[a].subject]=(s[i[a].subject]||0)+1,C.add(i[a].teacher),c.add(i[a].room))})}),{totalClasses:t,subjectCount:s,teacherCount:C.size,roomCount:c.size,averagePerDay:(t/5).toFixed(1)}},W=[{title:"节次",dataIndex:"period",key:"period",fixed:"left",width:120,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#999"},children:s.time})]})},{title:"星期一",dataIndex:"monday",key:"monday",render:t=>l(t)},{title:"星期二",dataIndex:"tuesday",key:"tuesday",render:t=>l(t)},{title:"星期三",dataIndex:"wednesday",key:"wednesday",render:t=>l(t)},{title:"星期四",dataIndex:"thursday",key:"thursday",render:t=>l(t)},{title:"星期五",dataIndex:"friday",key:"friday",render:t=>l(t)}],l=t=>t?e.jsx("div",{style:{padding:"4px 0"},children:e.jsxs(d,{direction:"vertical",size:2,style:{width:"100%"},children:[e.jsx("div",{children:e.jsx(h,{color:"blue",children:t.subject})}),e.jsx("div",{children:e.jsxs(d,{size:4,children:[e.jsx(L,{style:{color:"#999"}}),e.jsx("span",{children:t.teacher})]})}),e.jsx("div",{children:e.jsxs(d,{size:4,children:[e.jsx(Q,{style:{color:"#999"}}),e.jsx("span",{children:t.room})]})})]})}):e.jsx("div",{style:{height:"60px",textAlign:"center",color:"#999"},children:"空闲"}),r=F(),j=n?y.find(t=>t.id===n):null;return e.jsxs("div",{children:[e.jsx(g,{style:{marginBottom:16},children:e.jsxs(A,{gutter:16,align:"middle",children:[e.jsx(o,{span:8,children:e.jsx(p,{placeholder:"请选择班级",style:{width:"100%"},onChange:z,value:n,children:y.map(t=>e.jsxs(p.Option,{value:t.id,children:[t.name,e.jsx(h,{color:t.type==="文科"?"blue":"green",style:{marginLeft:8},children:t.type})]},t.id))})}),e.jsx(o,{span:4,children:e.jsx(p,{placeholder:"请选择周次",style:{width:"100%"},onChange:T,value:x,children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsxs(p.Option,{value:String(t),children:["第",t,"周"]},t))})}),e.jsx(o,{span:12,style:{textAlign:"right"},children:e.jsxs(d,{children:[e.jsx(b,{icon:e.jsx(_,{}),onClick:B,children:"打印课表"}),e.jsx(b,{icon:e.jsx(q,{}),onClick:$,children:"导出课表"})]})})]})}),!n&&e.jsx(H,{message:"请选择班级",description:"请先选择要查看课表的班级",type:"info",showIcon:!0,style:{marginBottom:16}}),n&&r&&e.jsxs(e.Fragment,{children:[e.jsx(g,{style:{marginBottom:16},children:e.jsxs(A,{gutter:16,children:[e.jsxs(o,{span:6,children:[e.jsx(I,{title:"总课时数",value:r.totalClasses,suffix:"节",prefix:e.jsx(J,{})}),e.jsx(R,{style:{margin:"12px 0"}}),e.jsxs("div",{children:["平均每天 ",r.averagePerDay," 节课"]})]}),e.jsxs(o,{span:6,children:[e.jsx(I,{title:"任课教师",value:r.teacherCount,suffix:"名",prefix:e.jsx(P,{})}),e.jsx(R,{style:{margin:"12px 0"}}),e.jsxs("div",{children:["使用教室 ",r.roomCount," 间"]})]}),e.jsxs(o,{span:12,children:[e.jsx(U,{level:5,children:"课程分布"}),e.jsx(d,{wrap:!0,children:Object.entries(r.subjectCount).map(([t,s])=>e.jsxs(h,{color:"blue",children:[t,": ",s,"节"]},t))})]})]})}),e.jsx(g,{title:e.jsxs(d,{children:[e.jsxs("span",{children:[j.name,"课程表"]}),e.jsx(h,{color:j.type==="文科"?"blue":"green",children:j.type}),e.jsxs(h,{color:"orange",children:["第",x,"周"]})]}),children:e.jsx(N,{columns:W,dataSource:u,pagination:!1,scroll:{x:1200},bordered:!0})})]})]})};export{he as default};
