import{r as m,j as e,S as u,B as f,D as V}from"./index-CRGFAelx.js";import{F as a}from"./index-BtB-I5Zv.js";import{C as v,R as h,a as l}from"./row-DLTz1eyr.js";import{S as i}from"./index-CHwDzM0o.js";import{R as _}from"./PrinterOutlined-yG4QRJ8y.js";import{R as H}from"./DownloadOutlined-DicCxT2C.js";import{A as J}from"./index-BdJtQ73w.js";import{S as K}from"./index-KZPfbInn.js";import{R as L}from"./ClockCircleOutlined-CUkCM8AY.js";import{T as N}from"./index-Cmv3WIPB.js";import{T}from"./index-CHuUg0jK.js";import{F as Q}from"./Table-tlkfFn9R.js";import{M as U}from"./index-CkpPlEOo.js";import{s as g}from"./index-C_r2XKYF.js";import{R as X}from"./EnvironmentOutlined-gGXNWUWb.js";import"./DownloadOutlined-DTidZHln.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./EditOutlined-Cz0pdb8B.js";const{Title:Y}=N,be=()=>{const[c,k]=m.useState(null),[F,j]=m.useState(!1),[x]=a.useForm(),[o,O]=m.useState(null),[R,E]=m.useState("1"),p=[{id:"T0001",name:"张明",subject:"语文",title:"高级教师"},{id:"T0002",name:"李芳",subject:"语文",title:"一级教师"},{id:"T0003",name:"王静",subject:"语文",title:"高级教师"},{id:"T0004",name:"刘洋",subject:"语文",title:"二级教师"},{id:"T0005",name:"陈强",subject:"数学",title:"高级教师"},{id:"T0006",name:"杨丽",subject:"数学",title:"一级教师"},{id:"T0007",name:"赵伟",subject:"数学",title:"高级教师"},{id:"T0008",name:"孙敏",subject:"数学",title:"二级教师"},{id:"T0009",name:"周婷",subject:"英语",title:"高级教师"},{id:"T0010",name:"吴超",subject:"英语",title:"一级教师"},{id:"T0011",name:"郑阳",subject:"英语",title:"高级教师"},{id:"T0012",name:"黄莉",subject:"英语",title:"二级教师"},{id:"T0013",name:"徐磊",subject:"物理",title:"高级教师"},{id:"T0014",name:"马涛",subject:"物理",title:"一级教师"},{id:"T0015",name:"胡军",subject:"物理",title:"二级教师"},{id:"T0016",name:"朱琳",subject:"化学",title:"高级教师"},{id:"T0017",name:"郭静",subject:"化学",title:"一级教师"},{id:"T0018",name:"何勇",subject:"化学",title:"二级教师"},{id:"T0019",name:"高峰",subject:"生物",title:"高级教师"},{id:"T0020",name:"林娜",subject:"生物",title:"一级教师"},{id:"T0021",name:"谢明",subject:"生物",title:"二级教师"},{id:"T0022",name:"韩雪",subject:"政治",title:"高级教师"},{id:"T0023",name:"曾艳",subject:"政治",title:"一级教师"},{id:"T0024",name:"汪洋",subject:"政治",title:"二级教师"},{id:"T0025",name:"唐华",subject:"历史",title:"高级教师"},{id:"T0026",name:"邓超",subject:"历史",title:"一级教师"},{id:"T0027",name:"冯敏",subject:"历史",title:"二级教师"},{id:"T0028",name:"彭勇",subject:"地理",title:"高级教师"},{id:"T0029",name:"梁静",subject:"地理",title:"一级教师"},{id:"T0030",name:"程阳",subject:"地理",title:"二级教师"}],M=p.reduce((t,s)=>(t[s.subject]||(t[s.subject]=[]),t[s.subject].push(s),t),{}),A=[{id:1,name:"第一节",time:"08:00-08:45"},{id:2,name:"第二节",time:"08:55-09:40"},{id:3,name:"第三节",time:"10:00-10:45"},{id:4,name:"第四节",time:"10:55-11:40"},{id:5,name:"第五节",time:"14:00-14:45"},{id:6,name:"第六节",time:"14:55-15:40"},{id:7,name:"第七节",time:"16:00-16:45"},{id:8,name:"第八节",time:"16:55-17:40"}],S=t=>{const s=["高一(1)班","高一(2)班","高二(1)班","高二(2)班","高三(1)班","高三(2)班"],n=["A101","A102","A103","A201","A202","A203"],d=[];return A.forEach(b=>{const I={key:b.id,period:b.name,time:b.time};["monday","tuesday","wednesday","thursday","friday"].forEach(W=>{var C;if(Math.random()<.7){const $=Math.floor(Math.random()*s.length);I[W]={class:s[$],room:n[Math.floor(Math.random()*n.length)],subject:((C=p.find(G=>G.id===t))==null?void 0:C.subject)||"语文"}}}),d.push(I)}),d},B=t=>{k(t),O(S(t))},D=t=>{E(t),O(S(c))},w=(t,s)=>{const n=t[s];x.setFieldsValue({period:t.period,day:s,class:n==null?void 0:n.class,room:n==null?void 0:n.room,subject:n==null?void 0:n.subject}),j(!0)},q=()=>{g.success("正在打印课程表")},z=()=>{g.success("课程表已导出")},P=[{title:"节次",dataIndex:"period",key:"period",fixed:"left",width:100,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:t}),e.jsx("div",{style:{fontSize:"12px",color:"#999"},children:s.time})]})},{title:"星期一",dataIndex:"monday",key:"monday",render:(t,s)=>r(t,s,"monday")},{title:"星期二",dataIndex:"tuesday",key:"tuesday",render:(t,s)=>r(t,s,"tuesday")},{title:"星期三",dataIndex:"wednesday",key:"wednesday",render:(t,s)=>r(t,s,"wednesday")},{title:"星期四",dataIndex:"thursday",key:"thursday",render:(t,s)=>r(t,s,"thursday")},{title:"星期五",dataIndex:"friday",key:"friday",render:(t,s)=>r(t,s,"friday")}],r=(t,s,n)=>t?e.jsx("div",{style:{cursor:"pointer"},onClick:()=>w(s,n),children:e.jsxs(u,{direction:"vertical",size:2,style:{width:"100%"},children:[e.jsx("div",{children:e.jsx(T,{color:"blue",children:t.class})}),e.jsx("div",{children:e.jsxs(u,{size:4,children:[e.jsx(X,{style:{color:"#999"}}),e.jsx("span",{children:t.room})]})}),e.jsx("div",{children:e.jsx(T,{color:"green",children:t.subject})})]})}):e.jsx(f,{type:"dashed",size:"small",onClick:()=>w(s,n),style:{width:"100%",height:"100%"},children:"空闲"}),y=(()=>{if(!o)return null;let t=0,s={monday:0,tuesday:0,wednesday:0,thursday:0,friday:0};return o.forEach(n=>{["monday","tuesday","wednesday","thursday","friday"].forEach(d=>{n[d]&&(t++,s[d]++)})}),{totalClasses:t,classesByDay:s,averagePerDay:(t/5).toFixed(1)}})();return e.jsxs("div",{children:[e.jsx(v,{style:{marginBottom:16},children:e.jsxs(h,{gutter:16,align:"middle",children:[e.jsx(l,{span:8,children:e.jsx(i,{placeholder:"请选择教师",style:{width:"100%"},onChange:B,value:c,showSearch:!0,optionFilterProp:"children",children:Object.entries(M).map(([t,s])=>e.jsx(i.OptGroup,{label:`${t}教师`,children:s.map(n=>e.jsxs(i.Option,{value:n.id,children:[n.name," (",n.title,")"]},n.id))},t))})}),e.jsx(l,{span:4,children:e.jsx(i,{placeholder:"请选择周次",style:{width:"100%"},onChange:D,value:R,children:Array.from({length:20},(t,s)=>s+1).map(t=>e.jsxs(i.Option,{value:String(t),children:["第",t,"周"]},t))})}),e.jsx(l,{span:12,style:{textAlign:"right"},children:e.jsxs(u,{children:[e.jsx(f,{icon:e.jsx(_,{}),onClick:q,children:"打印课表"}),e.jsx(f,{icon:e.jsx(H,{}),onClick:z,children:"导出课表"})]})})]})}),!c&&e.jsx(J,{message:"请选择教师",description:"请先选择要查看课表的教师",type:"info",showIcon:!0,style:{marginBottom:16}}),c&&o&&e.jsxs(e.Fragment,{children:[e.jsx(v,{style:{marginBottom:16},children:e.jsxs(h,{gutter:16,children:[e.jsxs(l,{span:8,children:[e.jsx(K,{title:"总课时数",value:y.totalClasses,suffix:"节",prefix:e.jsx(L,{})}),e.jsx(V,{style:{margin:"12px 0"}}),e.jsxs("div",{children:["平均每天 ",y.averagePerDay," 节课"]})]}),e.jsxs(l,{span:16,children:[e.jsx(Y,{level:5,children:"每日课时分布"}),e.jsx(u,{wrap:!0,children:Object.entries(y.classesByDay).map(([t,s])=>e.jsxs(T,{color:"blue",children:[t==="monday"?"周一":t==="tuesday"?"周二":t==="wednesday"?"周三":t==="thursday"?"周四":"周五",": ",s,"节"]},t))})]})]})}),e.jsx(v,{children:e.jsx(Q,{columns:P,dataSource:o,pagination:!1,scroll:{x:1200},bordered:!0})})]}),e.jsx(U,{title:"编辑课程",open:F,onOk:()=>{x.validateFields().then(t=>{console.log("Form values:",t),j(!1),g.success("保存成功")})},onCancel:()=>j(!1),width:600,children:e.jsxs(a,{form:x,layout:"vertical",children:[e.jsxs(h,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(a.Item,{name:"period",label:"节次",rules:[{required:!0}],children:e.jsx(i,{disabled:!0,children:A.map(t=>e.jsxs(i.Option,{value:t.name,children:[t.name," (",t.time,")"]},t.id))})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{name:"day",label:"星期",rules:[{required:!0}],children:e.jsxs(i,{disabled:!0,children:[e.jsx(i.Option,{value:"monday",children:"星期一"}),e.jsx(i.Option,{value:"tuesday",children:"星期二"}),e.jsx(i.Option,{value:"wednesday",children:"星期三"}),e.jsx(i.Option,{value:"thursday",children:"星期四"}),e.jsx(i.Option,{value:"friday",children:"星期五"})]})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(l,{span:12,children:e.jsx(a.Item,{name:"class",label:"班级",rules:[{required:!0,message:"请选择班级"}],children:e.jsxs(i,{placeholder:"请选择班级",children:[e.jsx(i.Option,{value:"高一(1)班",children:"高一(1)班"}),e.jsx(i.Option,{value:"高一(2)班",children:"高一(2)班"}),e.jsx(i.Option,{value:"高二(1)班",children:"高二(1)班"}),e.jsx(i.Option,{value:"高二(2)班",children:"高二(2)班"}),e.jsx(i.Option,{value:"高三(1)班",children:"高三(1)班"}),e.jsx(i.Option,{value:"高三(2)班",children:"高三(2)班"})]})})}),e.jsx(l,{span:12,children:e.jsx(a.Item,{name:"room",label:"教室",rules:[{required:!0,message:"请选择教室"}],children:e.jsxs(i,{placeholder:"请选择教室",children:[e.jsx(i.Option,{value:"A101",children:"A101"}),e.jsx(i.Option,{value:"A102",children:"A102"}),e.jsx(i.Option,{value:"A103",children:"A103"}),e.jsx(i.Option,{value:"A201",children:"A201"}),e.jsx(i.Option,{value:"A202",children:"A202"}),e.jsx(i.Option,{value:"A203",children:"A203"})]})})})]}),e.jsx(a.Item,{name:"subject",label:"课程",rules:[{required:!0,message:"请选择课程"}],children:e.jsx(i,{disabled:!0,children:p.map(t=>e.jsx(i.Option,{value:t.subject,children:t.subject},t.id))})})]})})]})};export{be as default};
