import{r as h,I as U,j as e,d as X,D as k,R as V,i as Y,B as p,S as F,T as Z,g as _}from"./index-BKa6_s3-.js";import{F as u}from"./index-Dy51_mCo.js";import{R as S,a as o,C as w}from"./row-CYwan9Jp.js";import{S as z}from"./index-D94na2-Y.js";import{T as M}from"./index-Bl9mn3fa.js";import{R as D}from"./PlusOutlined-DDPMmaXR.js";import{F as ee}from"./Table-mhucBYhg.js";import{M as P}from"./index-Bmfv7wRd.js";import{S as m}from"./index-B7le64xc.js";import{I as T}from"./index-RlXwS1IG.js";import{R as se,a as te}from"./EditOutlined-CBP3Yp8X.js";import{P as ne}from"./index-CvwNsgzJ.js";import{s as A}from"./index-BQEGLwMa.js";import{D as i}from"./index-iS5eY0QB.js";import"./EditOutlined-BMVt-i1G.js";import"./EyeOutlined-cX0j5ogd.js";import"./DeleteOutlined-DFutYCzo.js";var le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function B(){return B=Object.assign?Object.assign.bind():function(r){for(var x=1;x<arguments.length;x++){var c=arguments[x];for(var j in c)Object.prototype.hasOwnProperty.call(c,j)&&(r[j]=c[j])}return r},B.apply(this,arguments)}const re=(r,x)=>h.createElement(U,B({},r,{ref:x,icon:le})),ae=h.forwardRef(re),Se=()=>{const[r]=u.useForm(),[x,c]=h.useState(!1),[j,b]=h.useState(null),[H,y]=h.useState(!1),[O,q]=h.useState(null),L=()=>{const s=[],t=["高一","高二","高三"],I=["文科","理科"];return t.forEach(f=>{for(let d=1;d<=8;d++){const $=d<=4?I[0]:I[1],g=45+Math.floor(Math.random()*6),v=Math.floor(g*(.45+Math.random()*.1)),R=g-v;s.push({id:`${f}-${d}`,grade:f,name:`${d}班`,subject:$,studentCount:g,maleCount:v,femaleCount:R,headTeacher:J(),classroom:`${f.slice(1)}${String(d).padStart(2,"0")}教室`,createdAt:"2024-09-01",status:"active"})}}),s},J=()=>{const s=["张","李","王","刘","陈","杨","赵","黄","周","吴"],t=["伟","芳","娜","秀英","敏","静","丽","强","磊","军"];return s[Math.floor(Math.random()*s.length)]+t[Math.floor(Math.random()*t.length)]},[a]=h.useState(L()),l=h.useMemo(()=>{const s=a.length,t=a.reduce((n,C)=>n+C.studentCount,0),I=a.reduce((n,C)=>n+C.maleCount,0),f=a.reduce((n,C)=>n+C.femaleCount,0),d=a.filter(n=>n.grade==="高一").length,$=a.filter(n=>n.grade==="高二").length,g=a.filter(n=>n.grade==="高三").length,v=a.filter(n=>n.subject==="文科").length,R=a.filter(n=>n.subject==="理科").length;return{total:s,totalStudents:t,totalMale:I,totalFemale:f,gradeOneClasses:d,gradeTwoClasses:$,gradeThreeClasses:g,artClasses:v,scienceClasses:R,averageSize:Math.round(t/s)}},[a]),K=[{title:"班级",dataIndex:"id",key:"id",fixed:"left",render:(s,t)=>e.jsxs(F,{children:[e.jsxs("span",{style:{fontWeight:"bold"},children:[t.grade,t.name]}),e.jsx(M,{color:t.subject==="文科"?"blue":"green",children:t.subject})]})},{title:"班主任",dataIndex:"headTeacher",key:"headTeacher"},{title:"学生人数",dataIndex:"studentCount",key:"studentCount",render:(s,t)=>e.jsx(Z,{title:`男生: ${t.maleCount} | 女生: ${t.femaleCount}`,children:e.jsxs(F,{children:[e.jsxs("span",{children:[t.studentCount,"人"]}),e.jsx(ae,{style:{color:"#1890ff"}})]})})},{title:"教室",dataIndex:"classroom",key:"classroom"},{title:"状态",dataIndex:"status",key:"status",render:s=>e.jsx(_,{status:"success",text:"正常"})},{title:"操作",key:"action",fixed:"right",width:200,render:(s,t)=>e.jsxs(F,{size:"middle",children:[e.jsx(p,{type:"text",icon:e.jsx(V,{}),onClick:()=>N(t),children:"详情"}),e.jsx(p,{type:"text",icon:e.jsx(se,{}),onClick:()=>E(t),children:"编辑"}),e.jsx(ne,{title:"确定要删除这个班级吗？",onConfirm:()=>Q(),okText:"确定",cancelText:"取消",children:e.jsx(p,{type:"text",danger:!0,icon:e.jsx(te,{}),children:"删除"})})]})}],N=s=>{q(s),y(!0)},E=s=>{b(s),r.setFieldsValue(s),c(!0)},Q=s=>{A.success("删除成功")},W=()=>{r.validateFields().then(s=>{console.log("Form values:",s),r.resetFields(),c(!1),b(null),A.success(j?"修改成功":"添加成功")})},G=s=>e.jsxs(i,{column:2,children:[e.jsx(i.Item,{label:"班级编号",children:s.id}),e.jsx(i.Item,{label:"年级",children:s.grade}),e.jsx(i.Item,{label:"班级名称",children:s.name}),e.jsx(i.Item,{label:"科类",children:e.jsx(M,{color:s.subject==="文科"?"blue":"green",children:s.subject})}),e.jsx(i.Item,{label:"班主任",children:s.headTeacher}),e.jsx(i.Item,{label:"教室",children:s.classroom}),e.jsxs(i.Item,{label:"学生总数",children:[s.studentCount,"人"]}),e.jsxs(i.Item,{label:"性别比例",children:["男生：",s.maleCount,"人 | 女生：",s.femaleCount,"人"]}),e.jsx(i.Item,{label:"创建时间",children:s.createdAt}),e.jsx(i.Item,{label:"状态",children:e.jsx(_,{status:"success",text:"正常"})})]});return e.jsxs("div",{children:[e.jsxs(S,{gutter:16,style:{marginBottom:16},children:[e.jsx(o,{span:8,children:e.jsxs(w,{children:[e.jsx(z,{title:"班级总数",value:l.total,prefix:e.jsx(X,{}),suffix:"个班"}),e.jsx(k,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["高一：",l.gradeOneClasses,"班"]}),e.jsxs("span",{children:["高二：",l.gradeTwoClasses,"班"]}),e.jsxs("span",{children:["高三：",l.gradeThreeClasses,"班"]})]})]})}),e.jsx(o,{span:8,children:e.jsxs(w,{children:[e.jsx(z,{title:"学生总数",value:l.totalStudents,prefix:e.jsx(V,{}),suffix:"人"}),e.jsx(k,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:["男生：",l.totalMale,"人"]}),e.jsxs("span",{children:["女生：",l.totalFemale,"人"]}),e.jsxs("span",{children:["平均：",l.averageSize,"人/班"]})]})]})}),e.jsx(o,{span:8,children:e.jsxs(w,{children:[e.jsx(z,{title:"文理分科",value:l.artClasses+l.scienceClasses,prefix:e.jsx(Y,{}),suffix:"个班"}),e.jsx(k,{style:{margin:"12px 0"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:e.jsxs(M,{color:"blue",children:["文科：",l.artClasses,"班"]})}),e.jsx("span",{children:e.jsxs(M,{color:"green",children:["理科：",l.scienceClasses,"班"]})})]})]})})]}),e.jsxs(w,{style:{marginBottom:16},children:[e.jsx(p,{type:"primary",icon:e.jsx(D,{}),onClick:()=>{b(null),r.resetFields(),c(!0)},style:{marginBottom:16},children:"添加班级"}),e.jsx(ee,{columns:K,dataSource:a,rowKey:"id",scroll:{x:1200},pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 个班级`}})]}),e.jsx(P,{title:j?"编辑班级":"添加班级",open:x,onOk:W,onCancel:()=>{c(!1),b(null),r.resetFields()},width:600,children:e.jsxs(u,{form:r,layout:"vertical",children:[e.jsxs(S,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"grade",label:"年级",rules:[{required:!0,message:"请选择年级"}],children:e.jsxs(m,{children:[e.jsx(m.Option,{value:"高一",children:"高一"}),e.jsx(m.Option,{value:"高二",children:"高二"}),e.jsx(m.Option,{value:"高三",children:"高三"})]})})}),e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"name",label:"班级名称",rules:[{required:!0,message:"请输入班级名称"}],children:e.jsx(T,{placeholder:"请输入班级名称"})})})]}),e.jsxs(S,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"subject",label:"科类",rules:[{required:!0,message:"请选择科类"}],children:e.jsxs(m,{children:[e.jsx(m.Option,{value:"文科",children:"文科"}),e.jsx(m.Option,{value:"理科",children:"理科"})]})})}),e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"headTeacher",label:"班主任",rules:[{required:!0,message:"请输入班主任姓名"}],children:e.jsx(T,{placeholder:"请输入班主任姓名"})})})]}),e.jsxs(S,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"classroom",label:"教室",rules:[{required:!0,message:"请输入教室"}],children:e.jsx(T,{placeholder:"请输入教室"})})}),e.jsx(o,{span:12,children:e.jsx(u.Item,{name:"studentCount",label:"学生人数",rules:[{required:!0,message:"请输入学生人数"}],children:e.jsx(T,{type:"number",placeholder:"请输入学生人数"})})})]})]})}),e.jsx(P,{title:"班级详细信息",open:H,onCancel:()=>{y(!1),q(null)},footer:[e.jsx(p,{onClick:()=>y(!1),children:"关闭"},"close"),e.jsx(p,{type:"primary",onClick:()=>{y(!1),E(O)},children:"编辑"},"edit")],width:800,children:O&&G(O)})]})};export{Se as default};
