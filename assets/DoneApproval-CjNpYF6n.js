import{r as v,I as re,j as e,S as l,B as C,c as q,g as O,D as _,R as b,d as ne}from"./index-BVFfJd3t.js";import{F as x}from"./index-BiEj9eP2.js";import{C as g,R as K,a,T as U}from"./row-DAkbptQ2.js";import{T as ae}from"./index-BuW5QNsB.js";import{S}from"./index-dB5dkvR9.js";import{R as ie}from"./ClockCircleOutlined-BLWFv8w4.js";import{P as L}from"./progress-CPZE-WXF.js";import{R as oe,a as W,b as le}from"./FieldTimeOutlined-DTGGB127.js";import{R as k}from"./ApartmentOutlined-_vPMdZu9.js";import{I as ce}from"./index-Bc9A0WOF.js";import{R as de}from"./SearchOutlined-MYHhB8hV.js";import{S as o}from"./index-BO6PDH99.js";import{D as he}from"./index-D3XXMiS-.js";import{R as xe,a as Z}from"./FilterOutlined-BXBXBWpV.js";import{F as P}from"./Table-FIrAwD9v.js";import{R as G}from"./InboxOutlined-BlXW-lWn.js";import{M as pe}from"./index-B6UrwPW0.js";import{A as N}from"./index-Dmcu67QU.js";import{T as n}from"./index-BOzDQcKH.js";import{T as me}from"./Timeline-CavEB7bD.js";import{R as je}from"./FileTextOutlined-CaV4RNvh.js";import{R as ue}from"./CheckCircleOutlined-BhnTccG5.js";import"./EditOutlined-D7TqcQsM.js";import"./ClockCircleOutlined-CELcQ7Uv.js";import"./EyeOutlined-BsOnOFxh.js";import"./CalendarOutlined-DKq2sctu.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 518H506V160c0-4.4-3.6-8-8-8h-26a398.46 398.46 0 00-282.8 117.1 398.19 398.19 0 00-85.7 127.1A397.61 397.61 0 0072 552a398.46 398.46 0 00117.1 282.8c36.7 36.7 79.5 65.6 127.1 85.7A397.61 397.61 0 00472 952a398.46 398.46 0 00282.8-117.1c36.7-36.7 65.6-79.5 85.7-127.1A397.61 397.61 0 00872 552v-26c0-4.4-3.6-8-8-8zM705.7 787.8A331.59 331.59 0 01470.4 884c-88.1-.4-170.9-34.9-233.2-97.2C174.5 724.1 140 640.7 140 552c0-88.7 34.5-172.1 97.2-234.8 54.6-54.6 124.9-87.9 200.8-95.5V586h364.3c-7.7 76.3-41.3 147-96.6 201.8zM952 462.4l-2.6-28.2c-8.5-92.1-49.4-179-115.2-244.6A399.4 399.4 0 00589 74.6L560.7 72c-4.7-.4-8.7 3.2-8.7 7.9V464c0 4.4 3.6 8 8 8l384-1c4.7 0 8.4-4 8-8.6zm-332.2-58.2V147.6a332.24 332.24 0 01166.4 89.8c45.7 45.6 77 103.6 90 166.1l-256.4.7z"}}]},name:"pie-chart",theme:"outlined"};function z(){return z=Object.assign?Object.assign.bind():function(j){for(var d=1;d<arguments.length;d++){var t=arguments[d];for(var T in t)Object.prototype.hasOwnProperty.call(t,T)&&(j[T]=t[T])}return j},z.apply(this,arguments)}const ye=(j,d)=>v.createElement(re,z({},j,{ref:d,icon:fe})),ge=v.forwardRef(ye),{Title:ve,Text:r,Paragraph:Te}=ae,{TabPane:F}=U,{RangePicker:Me}=he,Ge=()=>{const[j,d]=v.useState(!1),[t,T]=v.useState(null),[A]=x.useForm(),[we,H]=v.useState({}),u=s=>{const i=[],D={leave:{title:"请假申请",icon:e.jsx(q,{}),contents:["事假","病假","婚假","丧假","产假"],prefix:"QJ"},car:{title:"用车申请",icon:e.jsx(W,{}),contents:["教学实践","学生活动","公务出差","物资采购"],prefix:"YC"},material:{title:"物资申请",icon:e.jsx(G,{}),contents:["办公用品","教学用品","实验器材","体育器材","电子设备"],prefix:"WZ"}},p=["已通过","已拒绝"],f=["教务处","学生处","总务处","实验室","体育组"],M=[{name:"王明华",title:"高级教师"},{name:"李秀英",title:"特级教师"},{name:"张建国",title:"高级教师"},{name:"刘淑华",title:"一级教师"},{name:"陈志强",title:"高级教师"},{name:"赵丽娟",title:"特级教师"},{name:"杨光明",title:"一级教师"},{name:"周晓梅",title:"高级教师"},{name:"吴国强",title:"一级教师"},{name:"孙玉兰",title:"高级教师"},{name:"郑伟东",title:"特级教师"},{name:"马丽华",title:"一级教师"}],Y=[{name:"张志远",title:"教务主任"},{name:"李国庆",title:"学生主任"},{name:"王建华",title:"总务主任"},{name:"刘明亮",title:"实验室主任"},{name:"陈学文",title:"体育组长"}],w=["1小时内","2小时内","4小时内","8小时内","24小时内"];for(let c=1;c<=8;c++){const y=ne("2025-07-25").subtract(Math.floor(Math.random()*30),"day"),B=p[Math.floor(Math.random()*p.length)],V=M[Math.floor(Math.random()*M.length)],J=f[Math.floor(Math.random()*f.length)],Q=Y.find(R=>R.title.includes(J.slice(0,2)))||Y[0],I=D[s],E=I.contents[Math.floor(Math.random()*I.contents.length)],te=w[Math.floor(Math.random()*w.length)],se=Math.random()>.7?"紧急":"普通";let m={key:c,id:`${I.prefix}${String(c).padStart(4,"0")}`,type:I.title,icon:I.icon,content:E,applicant:V.name,applicantTitle:V.title,approver:Q.name,approverTitle:Q.title,department:J,status:B,urgency:se,processingTime:te,createTime:y.format("YYYY-MM-DD HH:mm:ss"),approveTime:y.add(1,"day").format("YYYY-MM-DD HH:mm:ss"),comment:B==="已通过"?"同意申请":"不符合申请条件"};if(s==="leave"){const R=Math.floor(Math.random()*5)+1;m={...m,startDate:y.format("YYYY-MM-DD"),endDate:y.add(R,"day").format("YYYY-MM-DD"),days:R,reason:`因${E==="病假"?"身体不适":"个人事务"}申请请假${R}天`}}else s==="car"?m={...m,destination:["市教育局","县实验基地","市体育馆","市图书馆"][Math.floor(Math.random()*4)],startTime:y.format("YYYY-MM-DD HH:mm"),endTime:y.add(Math.floor(Math.random()*8)+2,"hour").format("YYYY-MM-DD HH:mm"),carType:["小型轿车","中型客车","大型客车"][Math.floor(Math.random()*3)]}:s==="material"&&(m={...m,quantity:Math.floor(Math.random()*50)+1,amount:Math.floor(Math.random()*5e3)+500,material:["打印纸","文具","墨盒","投影仪"][Math.floor(Math.random()*4)]});i.push(m)}return i},h=v.useMemo(()=>{const s=u("leave"),i=u("car"),D=u("material"),p=[...s,...i,...D],f=p.length,M=p.filter(c=>c.status==="已通过").length,Y=p.filter(c=>c.status==="已拒绝").length,w=p.filter(c=>["1小时内","2小时内"].includes(c.processingTime)).length;return{total:f,approved:M,rejected:Y,approvalRate:Math.round(M/f*100),fastProcess:w,fastProcessRate:Math.round(w/f*100),leave:s.length,car:i.length,material:D.length}},[]),X=s=>{T(s),d(!0)},ee=s=>{console.log("Search values:",s),H(s)},$=[{title:"申请编号",dataIndex:"id",key:"id",width:100,fixed:"left"},{title:"申请类型",dataIndex:"type",key:"type",width:120,render:(s,i)=>e.jsxs(l,{children:[i.icon,e.jsx("span",{children:s})]})},{title:"申请内容",dataIndex:"content",key:"content",width:120,render:s=>e.jsx(n,{color:"blue",children:s})},{title:"申请人",dataIndex:"applicant",key:"applicant",width:150,render:(s,i)=>e.jsxs(l,{children:[e.jsx(b,{}),e.jsx("span",{children:s}),e.jsx(n,{color:"blue",children:i.applicantTitle})]})},{title:"所属部门",dataIndex:"department",key:"department",width:120,render:s=>e.jsxs(l,{children:[e.jsx(k,{}),s]})},{title:"紧急程度",dataIndex:"urgency",key:"urgency",width:100,render:s=>e.jsx(n,{color:s==="紧急"?"red":"default",children:s})},{title:"处理时长",dataIndex:"processingTime",key:"processingTime",width:100,render:s=>e.jsx(n,{color:s.includes("1小时")?"green":s.includes("2小时")?"cyan":"blue",children:s})},{title:"申请时间",dataIndex:"createTime",key:"createTime",width:180},{title:"审批时间",dataIndex:"approveTime",key:"approveTime",width:180},{title:"审批结果",dataIndex:"status",key:"status",width:120,render:s=>{const i={已通过:{color:"success",icon:e.jsx(ue,{})},已拒绝:{color:"error",icon:e.jsx(le,{})}};return e.jsx(n,{icon:i[s].icon,color:i[s].color,children:s})}},{title:"审批人",dataIndex:"approver",key:"approver",width:150,render:(s,i)=>e.jsxs(l,{children:[e.jsx(b,{}),e.jsx("span",{children:s}),e.jsx(n,{color:"orange",children:i.approverTitle})]})},{title:"操作",key:"action",width:100,fixed:"right",render:(s,i)=>e.jsx(C,{type:"link",icon:e.jsx(je,{}),onClick:()=>X(i),children:"查看详情"})}];return e.jsxs("div",{children:[e.jsxs(g,{children:[e.jsx(ve,{level:4,children:"已办审批"}),e.jsxs(K,{gutter:[16,16],style:{marginBottom:24},children:[e.jsx(a,{span:6,children:e.jsx(g,{children:e.jsx(S,{title:"已办总数",value:h.total,prefix:e.jsx(ie,{style:{color:"#1890ff"}})})})}),e.jsx(a,{span:6,children:e.jsxs(g,{children:[e.jsx(S,{title:"通过率",value:h.approvalRate,suffix:"%",prefix:e.jsx(ge,{style:{color:"#52c41a"}})}),e.jsx("div",{style:{marginTop:8},children:e.jsx(L,{percent:h.approvalRate,size:"small",showInfo:!1,strokeColor:"#52c41a"})})]})}),e.jsx(a,{span:6,children:e.jsxs(g,{children:[e.jsx(S,{title:"快速处理",value:h.fastProcessRate,suffix:"%",prefix:e.jsx(oe,{style:{color:"#722ed1"}})}),e.jsx("div",{style:{marginTop:8},children:e.jsx(L,{percent:h.fastProcessRate,size:"small",showInfo:!1,strokeColor:"#722ed1"})})]})}),e.jsx(a,{span:6,children:e.jsx(g,{children:e.jsx(S,{title:"部门分布",value:5,prefix:e.jsx(k,{style:{color:"#13c2c2"}}),suffix:"个"})})})]}),e.jsx(g,{style:{marginBottom:16},children:e.jsxs(x,{form:A,layout:"inline",onFinish:ee,children:[e.jsx(x.Item,{name:"keyword",children:e.jsx(ce,{placeholder:"搜索申请编号/申请人",prefix:e.jsx(de,{}),style:{width:200}})}),e.jsx(x.Item,{name:"department",children:e.jsxs(o,{placeholder:"选择部门",style:{width:160},allowClear:!0,children:[e.jsx(o.Option,{value:"教务处",children:"教务处"}),e.jsx(o.Option,{value:"学生处",children:"学生处"}),e.jsx(o.Option,{value:"总务处",children:"总务处"}),e.jsx(o.Option,{value:"实验室",children:"实验室"}),e.jsx(o.Option,{value:"体育组",children:"体育组"})]})}),e.jsx(x.Item,{name:"status",children:e.jsxs(o,{placeholder:"审批结果",style:{width:120},allowClear:!0,children:[e.jsx(o.Option,{value:"已通过",children:"已通过"}),e.jsx(o.Option,{value:"已拒绝",children:"已拒绝"})]})}),e.jsx(x.Item,{name:"processingTime",children:e.jsxs(o,{placeholder:"处理时长",style:{width:140},allowClear:!0,children:[e.jsx(o.Option,{value:"1小时内",children:"1小时内"}),e.jsx(o.Option,{value:"2小时内",children:"2小时内"}),e.jsx(o.Option,{value:"4小时内",children:"4小时内"}),e.jsx(o.Option,{value:"8小时内",children:"8小时内"}),e.jsx(o.Option,{value:"24小时内",children:"24小时内"})]})}),e.jsx(x.Item,{name:"dateRange",children:e.jsx(Me,{style:{width:240}})}),e.jsx(x.Item,{children:e.jsxs(l,{children:[e.jsx(C,{type:"primary",htmlType:"submit",icon:e.jsx(xe,{}),children:"筛选"}),e.jsx(C,{onClick:()=>{A.resetFields(),H({})},children:"重置"})]})})]})}),e.jsxs(U,{defaultActiveKey:"leave",children:[e.jsx(F,{tab:e.jsxs("span",{children:[e.jsx(q,{}),"请假申请",e.jsx(O,{count:h.leave,offset:[10,-5]})]}),children:e.jsx(P,{columns:$,dataSource:u("leave"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 条记录`},scroll:{x:1300}})},"leave"),e.jsx(F,{tab:e.jsxs("span",{children:[e.jsx(W,{}),"用车申请",e.jsx(O,{count:h.car,offset:[10,-5]})]}),children:e.jsx(P,{columns:$,dataSource:u("car"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 条记录`},scroll:{x:1300}})},"car"),e.jsx(F,{tab:e.jsxs("span",{children:[e.jsx(G,{}),"物资申请",e.jsx(O,{count:h.material,offset:[10,-5]})]}),children:e.jsx(P,{columns:$,dataSource:u("material"),pagination:{pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:s=>`共 ${s} 条记录`},scroll:{x:1300}})},"material")]})]}),e.jsx(pe,{title:"申请详情",open:j,onCancel:()=>d(!1),footer:[e.jsx(C,{onClick:()=>d(!1),children:"关闭"},"close")],width:700,children:t&&e.jsxs(e.Fragment,{children:[e.jsx(N,{message:e.jsxs(l,{children:[e.jsx(n,{color:t.urgency==="紧急"?"red":"default",children:t.urgency}),e.jsx(n,{color:t.status==="已通过"?"success":"error",children:t.status}),e.jsxs(n,{color:t.processingTime.includes("1小时")?"green":"blue",children:[t.processingTime,"处理"]})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsx(_,{orientation:"left",children:"基本信息"}),e.jsxs(K,{gutter:[16,16],children:[e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"申请编号："}),e.jsx(r,{children:t.id})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"申请类型："}),e.jsxs(l,{children:[t.icon,e.jsx(r,{children:t.type})]})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"申请人："}),e.jsxs(l,{children:[e.jsx(b,{}),e.jsx(r,{children:t.applicant}),e.jsx(n,{color:"blue",children:t.applicantTitle})]})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"所属部门："}),e.jsxs(l,{children:[e.jsx(k,{}),e.jsx(r,{children:t.department})]})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"申请时间："}),e.jsx(r,{children:t.createTime})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"审批时间："}),e.jsx(r,{children:t.approveTime})]}),t.startDate&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{span:24,children:[e.jsx(r,{type:"secondary",children:"请假类型："}),e.jsx(n,{color:"blue",children:t.content})]}),e.jsxs(a,{span:24,children:[e.jsx(r,{type:"secondary",children:"请假时间："}),e.jsxs(r,{children:[t.startDate," 至 ",t.endDate,"（共",t.days,"天）"]})]}),e.jsxs(a,{span:24,children:[e.jsx(r,{type:"secondary",children:"请假原因："}),e.jsx(Te,{children:t.reason})]})]}),t.destination&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"用车用途："}),e.jsx(n,{color:"blue",children:t.content})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"目的地："}),e.jsx(r,{children:t.destination})]}),e.jsxs(a,{span:24,children:[e.jsx(r,{type:"secondary",children:"用车时间："}),e.jsxs(r,{children:[t.startTime," 至 ",t.endTime]})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"车辆类型："}),e.jsx(r,{children:t.carType})]})]}),t.material&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"物资类型："}),e.jsx(n,{color:"blue",children:t.content})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"物资名称："}),e.jsx(r,{children:t.material})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"申请数量："}),e.jsxs(r,{children:[t.quantity,"个"]})]}),e.jsxs(a,{span:12,children:[e.jsx(r,{type:"secondary",children:"预算金额："}),e.jsxs(r,{children:["¥",t.amount.toFixed(2)]})]})]})]}),e.jsx(_,{orientation:"left",children:"审批流程"}),e.jsx(me,{items:[{color:"blue",children:e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx(n,{icon:e.jsx(b,{}),color:"blue",children:"申请人"}),e.jsx(r,{children:t.applicant}),e.jsx(n,{color:"blue",children:t.applicantTitle}),e.jsx(n,{icon:e.jsx(k,{}),color:"blue",children:t.department})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx(n,{icon:e.jsx(Z,{}),color:"blue",children:t.createTime}),e.jsx(n,{color:t.urgency==="紧急"?"red":"default",children:t.urgency})]})]})},{color:t.status==="已通过"?"green":"red",children:e.jsxs(e.Fragment,{children:[e.jsxs(l,{children:[e.jsx(n,{icon:e.jsx(b,{}),color:"orange",children:"审批人"}),e.jsx(r,{children:t.approver}),e.jsx(n,{color:"orange",children:t.approverTitle})]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx(n,{icon:e.jsx(Z,{}),color:t.status==="已通过"?"success":"error",children:t.approveTime}),e.jsxs(n,{color:t.processingTime.includes("1小时")?"green":"blue",children:[t.processingTime,"处理"]})]}),e.jsx(N,{message:t.status,description:t.comment,type:t.status==="已通过"?"success":"error",showIcon:!0,style:{marginTop:8}})]})}]})]})})]})};export{Ge as default};
