import{r as m,I as S,j as e,B as x,D as g,S as c,R as M,d as w}from"./index-GgCtaIGn.js";import{d as B}from"./dayjs.min-BcUF0OZ7.js";import{F as i}from"./index-ChozH53D.js";import{C as v}from"./row-DkXY2Vpz.js";import{T as L}from"./index-CcFIDmFY.js";import{A as b}from"./index-Bf_beJbf.js";import{S as o}from"./index-BC_b-_9i.js";import{I}from"./index-aivIQGyG.js";import{U as C,R as y}from"./UploadOutlined-eRkgVvvY.js";import{R as O}from"./SaveOutlined-DpAGI4yw.js";import{T as d}from"./index-SqXxCpUy.js";import{R as D}from"./ApartmentOutlined-Dwkz8JeW.js";import{s as u}from"./index-C6tIceSr.js";import"./EditOutlined-lBA9r8Oc.js";import"./EyeOutlined-DiEmTHLP.js";import"./DeleteOutlined-DFutYCzo.js";import"./DownloadOutlined-DTidZHln.js";import"./progress-BwjCmK0U.js";var V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function p(){return p=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},p.apply(this,arguments)}const $=(s,t)=>m.createElement(S,p({},s,{ref:t,icon:V})),q=m.forwardRef($),{Title:z,Text:j}=L,{TextArea:E}=I,{Option:r}=o,te=()=>{const[s]=i.useForm(),[t,n]=m.useState([]),[a,f]=m.useState(!1),F=async l=>{f(!0);try{console.log("Form values:",{...l,attachments:t,publishTime:B().format("YYYY-MM-DD HH:mm:ss")}),u.success("公告发布成功"),s.resetFields(),n([])}catch{u.error("发布失败，请重试")}f(!1)},R=({fileList:l})=>{n(l)},T=l=>{const h=l.size/1024/1024<10;return h||u.error("文件大小不能超过10MB"),h};return e.jsx("div",{children:e.jsxs(v,{children:[e.jsx(z,{level:4,children:"发布公告"}),e.jsx(b,{message:"发布提示",description:e.jsxs("ul",{children:[e.jsx("li",{children:"请认真填写公告标题和内容，确保信息准确无误"}),e.jsx("li",{children:"支持上传PDF、Word、Excel等格式的附件，单个文件大小不超过10MB"}),e.jsx("li",{children:"发布后将立即通知相关接收对象"})]}),type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsxs(i,{form:s,layout:"vertical",onFinish:F,initialValues:{type:"通知",department:"教务处",recipients:"全体师生"},children:[e.jsx(i.Item,{label:"公告类型",name:"type",rules:[{required:!0,message:"请选择公告类型"}],children:e.jsxs(o,{children:[e.jsx(r,{value:"通知",children:"通知"}),e.jsx(r,{value:"公告",children:"公告"}),e.jsx(r,{value:"文件",children:"文件"})]})}),e.jsx(i.Item,{label:"发布部门",name:"department",rules:[{required:!0,message:"请选择发布部门"}],children:e.jsxs(o,{children:[e.jsx(r,{value:"教务处",children:"教务处"}),e.jsx(r,{value:"学生处",children:"学生处"}),e.jsx(r,{value:"总务处",children:"总务处"}),e.jsx(r,{value:"实验室",children:"实验室"}),e.jsx(r,{value:"体育组",children:"体育组"})]})}),e.jsx(i.Item,{label:"接收对象",name:"recipients",rules:[{required:!0,message:"请选择接收对象"}],children:e.jsxs(o,{children:[e.jsx(r,{value:"全体师生",children:"全体师生"}),e.jsx(r,{value:"全体教师",children:"全体教师"}),e.jsx(r,{value:"全体学生",children:"全体学生"})]})}),e.jsx(i.Item,{label:"公告标题",name:"title",rules:[{required:!0,message:"请输入公告标题"},{max:50,message:"标题不能超过50个字符"}],children:e.jsx(I,{placeholder:"请输入公告标题"})}),e.jsx(i.Item,{label:"公告内容",name:"content",rules:[{required:!0,message:"请输入公告内容"},{min:10,message:"内容不能少于10个字符"}],children:e.jsx(E,{rows:10,placeholder:"请输入公告内容",showCount:!0,maxLength:2e3})}),e.jsx(i.Item,{label:"附件",name:"attachments",extra:"支持上传PDF、Word、Excel等格式文件，单个文件不超过10MB",children:e.jsx(C,{fileList:t,onChange:R,beforeUpload:T,maxCount:5,children:e.jsx(x,{icon:e.jsx(y,{}),children:"选择文件"})})}),e.jsx(i.Item,{label:"置顶公告",name:"isTop",valuePropName:"checked",children:e.jsxs(o,{children:[e.jsx(r,{value:!1,children:"不置顶"}),e.jsx(r,{value:!0,children:"置顶"})]})}),e.jsx(g,{}),e.jsx(i.Item,{children:e.jsxs(c,{size:"large",children:[e.jsx(x,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:a,children:"发布公告"}),e.jsx(x,{icon:e.jsx(O,{}),onClick:()=>s.submit(),children:"保存草稿"})]})})]}),e.jsx(b,{message:"预览效果",type:"info",showIcon:!0,style:{marginTop:24,marginBottom:16}}),e.jsx(v,{children:e.jsxs(c,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs(c,{children:[e.jsx(d,{color:"blue",children:s.getFieldValue("type")||"通知"}),e.jsx(j,{strong:!0,children:s.getFieldValue("title")||"公告标题"})]}),e.jsxs(c,{children:[e.jsx(d,{icon:e.jsx(M,{}),color:"blue",children:"张志远（教务主任）"}),e.jsx(d,{icon:e.jsx(D,{}),color:"purple",children:s.getFieldValue("department")||"教务处"}),e.jsx(d,{icon:e.jsx(w,{}),color:"cyan",children:s.getFieldValue("recipients")||"全体师生"})]}),e.jsx("div",{style:{background:"#f5f5f5",padding:16,borderRadius:4},children:e.jsx(j,{type:"secondary",children:s.getFieldValue("content")||"公告内容预览区域"})}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(g,{children:"附件"}),e.jsx(c,{direction:"vertical",children:t.map(l=>e.jsxs(j,{children:[e.jsx(y,{})," ",l.name]},l.uid))})]})]})})]})})};export{te as default};
