import{bI as x,bJ as F,bK as v,bL as O,b as c,bm as P,bM as j,r as m,E,bN as R,bO as M,_ as w}from"./index-BKa6_s3-.js";let a=null,l=e=>e(),g=[],d={};function h(){const{getContainer:e,duration:n,rtl:r,maxCount:s,top:t}=d,o=(e==null?void 0:e())||document.body;return{getContainer:()=>o,duration:n,rtl:r,maxCount:s,top:t}}const I=c.forwardRef((e,n)=>{const{messageConfig:r,sync:s}=e,{getPrefixCls:t}=m.useContext(E),o=d.prefixCls||t("message"),u=m.useContext(R),[f,C]=M(Object.assign(Object.assign(Object.assign({},r),{prefixCls:o}),u.message));return c.useImperativeHandle(n,()=>{const i=Object.assign({},f);return Object.keys(i).forEach(b=>{i[b]=(...y)=>(s(),f[b].apply(f,y))}),{instance:i,sync:s}}),C}),_=c.forwardRef((e,n)=>{const[r,s]=c.useState(h),t=()=>{s(h)};c.useEffect(t,[]);const o=j(),u=o.getRootPrefixCls(),f=o.getIconPrefixCls(),C=o.getTheme(),i=c.createElement(I,{ref:n,sync:t,messageConfig:r});return c.createElement(P,{prefixCls:u,iconPrefixCls:f,theme:C},o.holderRender?o.holderRender(i):i)});function p(){if(!a){const e=document.createDocumentFragment(),n={fragment:e};a=n,l(()=>{O()(c.createElement(_,{ref:s=>{const{instance:t,sync:o}=s||{};Promise.resolve().then(()=>{!n.instance&&t&&(n.instance=t,n.sync=o,p())})}}),e)});return}a.instance&&(g.forEach(e=>{const{type:n,skipped:r}=e;if(!r)switch(n){case"open":{l(()=>{const s=a.instance.open(Object.assign(Object.assign({},d),e.config));s==null||s.then(e.resolve),e.setCloseFn(s)});break}case"destroy":l(()=>{a==null||a.instance.destroy(e.key)});break;default:l(()=>{var s;const t=(s=a.instance)[n].apply(s,w(e.args));t==null||t.then(e.resolve),e.setCloseFn(t)})}}),g=[])}function G(e){d=Object.assign(Object.assign({},d),e),l(()=>{var n;(n=a==null?void 0:a.sync)===null||n===void 0||n.call(a)})}function k(e){const n=v(r=>{let s;const t={type:"open",config:e,resolve:r,setCloseFn:o=>{s=o}};return g.push(t),()=>{s?l(()=>{s()}):t.skipped=!0}});return p(),n}function H(e,n){const r=v(s=>{let t;const o={type:e,args:n,resolve:s,setCloseFn:u=>{t=u}};return g.push(o),()=>{t?l(()=>{t()}):o.skipped=!0}});return p(),r}const N=e=>{g.push({type:"destroy",key:e}),p()},S=["success","info","warning","error","loading"],A={open:k,destroy:N,config:G,useMessage:F,_InternalPanelDoNotUseOrYouWillBeFired:x},D=A;S.forEach(e=>{D[e]=(...n)=>H(e,n)});export{D as s};
